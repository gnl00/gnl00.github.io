<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript | Gnl</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/assets/style.122728f6.css">
    <link rel="modulepreload" href="/assets/app.d8a09d34.js">
    <link rel="modulepreload" href="/assets/posts_fe_JavaScript.md.d009bed6.lean.js">
    
    <link rel="icon" href="./img/logo.jpeg">
  <meta name="twitter:title" content="JavaScript | Gnl">
  <meta property="og:title" content="JavaScript | Gnl">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Gnl, back to home" data-v-675d8756 data-v-cc01ef16><img class="logo" src="/./img/logo.jpeg" alt="Logo" data-v-cc01ef16> Gnl</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/renew/" data-v-b8818f8c>Recently <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/al/" data-v-b8818f8c>Algorithm <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/posts/fe/" data-v-b8818f8c>Frontend <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/be/" data-v-b8818f8c>Backend <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/db/" data-v-b8818f8c>Database <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/mw/" data-v-b8818f8c>Middleware <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/renew/" data-v-b8818f8c>Recently <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/al/" data-v-b8818f8c>Algorithm <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/posts/fe/" data-v-b8818f8c>Frontend <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/be/" data-v-b8818f8c>Backend <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/db/" data-v-b8818f8c>Database <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/posts/mw/" data-v-b8818f8c>Middleware <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item active" href="/posts/fe/JavaScript">JavaScript</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/posts/fe/Vuejs">Vue.js</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/posts/fe/React">React</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/posts/fe/TypeScript">TypeScript</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><div id="rightSidebar" class="right-sidebar" data-v-630e5c27><!--[--><ul data-v-630e5c27><li data-v-630e5c27><a href="#_1-关于" data-v-630e5c27>1. 关于</a><!--[--><ul data-v-630e5c27><li data-v-630e5c27><a href="#_1-1-什么是-javascript" data-v-630e5c27>1.1 什么是 JavaScript</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_1-2-引擎" data-v-630e5c27>1.2 引擎</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_1-3-作用-能力" data-v-630e5c27>1.3 作用/能力</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_1-4-开发手册" data-v-630e5c27>1.4 开发手册</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_1-5-兼容性表" data-v-630e5c27>1.5 兼容性表</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_1-6-代码风格" data-v-630e5c27>1.6 代码风格</a></li></ul><!--]--></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-基础" data-v-630e5c27>2. 基础</a><!--[--><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-1-基础交互" data-v-630e5c27>2.1 基础交互</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-2-数据类型" data-v-630e5c27>2.2 数据类型</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-3-类型转换" data-v-630e5c27>2.3 类型转换</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-4-运算符" data-v-630e5c27>2.4 运算符</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-5-值比较" data-v-630e5c27>2.5 值比较</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-6-switch-语句" data-v-630e5c27>2.6 switch 语句</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-7-for-循环" data-v-630e5c27>2.7 for 循环</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-8-函数" data-v-630e5c27>2.8 函数</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-9-对象" data-v-630e5c27>2.9 对象</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-10-原始值转换" data-v-630e5c27>2.10 原始值转换</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-11-原始类型内置方法" data-v-630e5c27>2.11 原始类型内置方法</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-12-array" data-v-630e5c27>2.12 Array</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-13-可迭代对象" data-v-630e5c27>2.13 可迭代对象</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#_2-14-map-set" data-v-630e5c27>2.14 Map/Set</a></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#垃圾回收" data-v-630e5c27>垃圾回收</a></li></ul><!--]--></li></ul><ul data-v-630e5c27><li data-v-630e5c27><a href="#参考" data-v-630e5c27>参考</a><!----></li></ul><!--]--></div><h1 id="javascript" tabindex="-1">JavaScript <a class="header-anchor" href="#javascript" aria-hidden="true">#</a></h1><blockquote><p>行文仅记录 JavaScript 这门语言和其他语言不一样的地方或者容易搞混的地方，并非全部内容。</p></blockquote><h2 id="_1-关于" tabindex="-1">1. 关于 <a class="header-anchor" href="#_1-关于" aria-hidden="true">#</a></h2><br><h3 id="_1-1-什么是-javascript" tabindex="-1">1.1 什么是 JavaScript <a class="header-anchor" href="#_1-1-什么是-javascript" aria-hidden="true">#</a></h3><p>首先了解几个名词：</p><ul><li><strong>函数优先</strong></li><li><strong>原型编程</strong></li><li><strong>多范式编程</strong></li></ul><p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/First-class_Function" target="_blank" rel="noopener noreferrer">函数优先（First Class Function）</a>，当一门编程语言的函数可以被当作变量一样使用时，则可以认为该语言拥有<strong>函数优先</strong>这一特性。例如，函数可以被<em>当作参数</em>传递给其他函数，可以<em>作为另一个函数的返回值</em>，还可以被<em>赋值给一个变量</em>。</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Prototype-based_programming" target="_blank" rel="noopener noreferrer">原型编程</a>是一种面向对象编程的风格。在这种风格中不用显式地定义<strong>类</strong>，而是通过<em>向其它类的实例（对象）中添加属性和方法</em>来创建类，甚至使用<em>空对象</em>来创建类。</p><p><a href="https://en.wikipedia.org/wiki/Programming_paradigm" target="_blank" rel="noopener noreferrer">多范式编程</a>，指编程时的指导思想，是设计程序结构所采用的设计风格。目前主流的编程范式有：命令式编程、函数式编程、面向对象编程等</p><blockquote><p><strong>JavaScript</strong>是一种具有<strong>函数优先</strong>的轻量级，解释型或即时编译型的编程语言。JavaScript 是一种基于<strong>原型编程</strong>、<strong>多范式</strong>的动态脚本语言，支持面向对象、命令式和声明式（如函数式编程）编程风格。JavaScript 拥有自己的语言规范，即 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/ECMAScript" target="_blank" rel="noopener noreferrer">ECMAScript</a>，同时它的官方名称也叫做 <strong>ECMAScript</strong></p></blockquote><br><h3 id="_1-2-引擎" tabindex="-1">1.2 引擎 <a class="header-anchor" href="#_1-2-引擎" aria-hidden="true">#</a></h3><p>JavaScript 不仅可以在浏览器中执行，也可以在服务端执行，甚至可以在任意搭载了 <a href="https://en.wikipedia.org/wiki/JavaScript_engine" target="_blank" rel="noopener noreferrer">JavaScript 引擎</a> 的设备中执行。不同浏览器和运行环境上搭载的 JavaScript 引擎如下：</p><ul><li><a href="http://v8.js.cn/" target="_blank" rel="noopener noreferrer">V8</a>（Chrome、Edge、<a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js</a>）</li><li><a href="https://spidermonkey.dev/" target="_blank" rel="noopener noreferrer">SpiderMonkey</a>（FireFox）</li></ul><p>JavaScript 引擎的工作流程：</p><p>1、读取/解析 JavaScript 脚本</p><p>2、将脚本转换为机器语言</p><p>3、执行机器代码</p><blockquote><p>除了作为 JavaScript 引擎，V8 和 SpiderMonkey 还可以作为 <a href="https://www.jianshu.com/p/e4d002780cf8" target="_blank" rel="noopener noreferrer">WebAssembly</a> 引擎</p></blockquote><br><h3 id="_1-3-作用-能力" tabindex="-1">1.3 作用/能力 <a class="header-anchor" href="#_1-3-作用-能力" aria-hidden="true">#</a></h3><blockquote><p>现代的 JavaScript 是一种<strong>安全的</strong>编程语言。它<em>不提供对内存或 CPU 的底层访问</em>，因为它最初是为浏览器创建的，不需要这些功能。</p></blockquote><p>JavaScript 的能力很大程度上取决于它运行的环境。例如，<code>Node.js</code>支持允许 JavaScript 读取/写入任意文件，执行网络请求等的函数。</p><br><p>根据 JavaScript 运行的环境不同，它的能力也不同。例如，在<strong>浏览器中 JavaScript 能做的功能</strong>有：</p><ul><li>在网页中添加新的 HTML，修改网页已有内容和网页的样式。</li><li>响应用户的行为，响应鼠标的点击，指针的移动，按键的按动。</li><li>向远程服务器发送网络请求，下载和上传文件。</li><li>获取或设置 cookie。</li><li>操作客户端的数据（本地存储/会话存储）</li></ul><br><p>为了用户的（信息）安全，在浏览器中的 JavaScript 的能力是受限的。目的是防止恶意网页获取用户私人信息或损害用户数据。因此，JavaScript 在浏览器中受限的内容包括：</p><ul><li><p>JavaScript 最开始是专门为浏览器设计的一门语言，因此网页中的 JavaScript 不能读、写、复制和执行硬盘上的任意文件。<strong>JavaScript 没有直接访问操作系统的功能</strong>。</p><blockquote><p>现代浏览器允许 JavaScript 做一些文件相关的操作，但是这个操作是<em>受到限制的</em>。仅当用户做出特定的行为，JavaScript 才能操作这个文件。例如，用户把文件<em>拖放</em>到浏览器中，或者<em>通过 <code>&lt;input&gt;</code> 标签选择</em>了文件。</p></blockquote></li><li><p>与设备上的相机/麦克风等权限时，需要获得用户的明确许可。</p></li><li><p>不同的标签页/窗口之间通常互不了解。可以通过一个标签页使用 JavaScript 打开另一个标签页，但如果两个标签页打开的不是同一个网站（域名、协议或者端口任一不相同的网站），它们都不能相互通信。</p><blockquote><p>这就是浏览器的<strong>同源策略</strong>，要解决这个问题，可以使用 <a href="https://developer.mozilla.org/zh-CN/docs/web/http/cors" target="_blank" rel="noopener noreferrer">CORS（Cross-Origin Resource Sharing） 跨域资源共享</a></p></blockquote></li></ul><br><h3 id="_1-4-开发手册" tabindex="-1">1.4 开发手册 <a class="header-anchor" href="#_1-4-开发手册" aria-hidden="true">#</a></h3><blockquote><p>对于一些作用和意义不太明确的内置方法和 API，可以使用 MDN 的 JavaScript 参考手册来搜索相关内容，查找相关解释</p></blockquote><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference" target="_blank" rel="noopener noreferrer">MDN JavaScript 参考</a></li></ul><br><h3 id="_1-5-兼容性表" tabindex="-1">1.5 兼容性表 <a class="header-anchor" href="#_1-5-兼容性表" aria-hidden="true">#</a></h3><blockquote><p>JavaScript 是一门还在发展中的语言，定期会添加一些新功能，可以通过兼容性表查看不同浏览器中对新功能的支持情况</p></blockquote><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference" target="_blank" rel="noopener noreferrer">MDN JavaScript 参考</a></li><li><a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">Caniuse</a></li></ul><br><h3 id="_1-6-代码风格" tabindex="-1">1.6 代码风格 <a class="header-anchor" href="#_1-6-代码风格" aria-hidden="true">#</a></h3><ul><li><a href="https://zh.javascript.info/coding-style" target="_blank" rel="noopener noreferrer">JavaScript 代码风格</a></li></ul><br><h2 id="_2-基础" tabindex="-1">2. 基础 <a class="header-anchor" href="#_2-基础" aria-hidden="true">#</a></h2><p><strong>JavaScript 的使用形式</strong></p><ul><li>使用<code>&lt;script&gt;</code>标签的<code>src</code>属性引入，添加到 HTML 文件中</li><li>在<code>&lt;script&gt;</code>标签内编写 JavaScript 脚本内容</li></ul><blockquote><p>⚠</p><p>一般来说，<em>简单</em>的脚本才嵌入到 HTML 中。复杂的脚本存放在单独的文件中。</p><p>使用独立文件的好处是浏览器会下载它，然后将它保存到浏览器的缓存中，其他页面想要相同的脚本就会从缓存中获取，而不是下载它。所以文件实际上只会下载一次（节省流量，加快页面加载）</p></blockquote><br><h3 id="_2-1-基础交互" tabindex="-1">2.1 基础交互 <a class="header-anchor" href="#_2-1-基础交互" aria-hidden="true">#</a></h3><p>JavaScript 提供了以下三个基础的交互方式：</p><ul><li><code>alert</code>，它会显示一条信息，并等待用户确认。<code>alert</code>会自动调用输出参数的<code>toString</code>方法，而<code>console.log</code>不会</li><li><code>confirm</code>，显示一个带有问题以及确定和取消两个按钮的模态窗口。点击确定返回 <code>true</code>，点击取消返回 <code>false</code>。</li><li><code>prompt</code>，显示一个带有文本消息的模态窗口，还有 input 框和确定/取消按钮。</li></ul><blockquote><p>⚠</p><p>上述三个方法<strong>都是模态的：它们暂停脚本的执行，并且不允许用户与该页面的其余部分进行交互，直到窗口被解除。</strong></p></blockquote><br><h3 id="_2-2-数据类型" tabindex="-1">2.2 数据类型 <a class="header-anchor" href="#_2-2-数据类型" aria-hidden="true">#</a></h3><p>除了<code>Object</code>是复杂类型，其他都是原始类型。原始类型并不像对象一样存储键值属性。</p><ul><li><p><code>Number</code></p></li><li><p><code>BigInt</code></p></li><li><p><code>String</code></p></li><li><p><code>Boolean</code></p></li><li><p><code>Object</code></p></li><li><p><code>Symbol</code></p></li><li><p><code>null</code></p></li><li><p><code>undefined</code></p></li></ul><br><h4 id="_2-2-1-number" tabindex="-1">2.2.1 <strong>Number</strong> <a class="header-anchor" href="#_2-2-1-number" aria-hidden="true">#</a></h4><blockquote><p>双精度浮点数，以 64 位的格式进行存储</p></blockquote><p><strong>Number</strong> 包含几个特殊值：<code>Infinity</code>、<code>-Infinity</code>、<code>NaN</code></p><ul><li><code>Infinity</code>，表示无穷大，可以通过 <code>1 / 0</code> 来得到它</li><li><code>NaN</code>，代表一个计算错误，它是一个不正确的或者一个未定义的数学操作所得到的结果。<code>NaN</code> 是粘性的。任何对 <code>NaN</code> 的进一步数学运算都会返回 <code>NaN</code>，只有一个例外：<code>NaN ** 0 === 1</code>。很好理解，任何一个<code>Number</code>类型的 0 次幂结果都是 1</li></ul><blockquote><p>在 JavaScript 中做数学运算是安全的，可以做任何事，包括除以 0。不会像 Java 一样报错，最坏的情况仅仅是得到一个<code>NaN</code>结果</p></blockquote><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> billion <span class="token operator">=</span> <span class="token number">1000000000</span><span class="token punctuation">;</span>

<span class="token comment">// 也可以使用下划线 _ 作为分隔符：</span>
<span class="token keyword">let</span> billion <span class="token operator">=</span> <span class="token number">1_000_000_000</span><span class="token punctuation">;</span>
<span class="token comment">// 下划线扮演了“语法糖”的角色，使得数字具有更强的可读性，JavaScript 引擎会直接忽略数字之间的下划线</span>

<span class="token keyword">let</span> billion <span class="token operator">=</span> <span class="token number">1e9</span><span class="token punctuation">;</span>  <span class="token comment">// 10 亿，字面意思：数字 1 后面跟 9 个 0</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token number">7.3e9</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 73 亿（与 7300000000 和 7_300_000_000 相同）</span>

<span class="token keyword">let</span> mcs <span class="token operator">=</span> <span class="token number">0.000001</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> mcs <span class="token operator">=</span> <span class="token number">1e-6</span><span class="token punctuation">;</span> <span class="token comment">// 1 的左边有 6 个 0</span>

<span class="token comment">// -3 除以 1 后面跟着 3 个 0 的数字</span>
<span class="token number">1e-3</span> <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">;</span> <span class="token comment">// 0.001</span>

<span class="token comment">// -6 除以 1 后面跟着 6 个 0 的数字</span>
<span class="token number">1.23e-6</span> <span class="token operator">===</span> <span class="token number">1.23</span> <span class="token operator">/</span> <span class="token number">1000000</span><span class="token punctuation">;</span> <span class="token comment">// 0.00000123</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><br><p><strong>进制转换</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>

<span class="token comment">// 进制范围可以从 2 到 36。默认情况下是 10。</span>
<span class="token function">alert</span><span class="token punctuation">(</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ff</span>
<span class="token function">alert</span><span class="token punctuation">(</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 11111111</span>

<span class="token comment">// 当我们需要将一个较长的数字标识符转换成较短的时候，例如做一个短的 URL。可以简单地使用基数为 36 的数字系统表示</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token number">123456.</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2n9c</span>

<span class="token comment">// 使用两个点来调用一个方法</span>
<span class="token comment">// 如果想直接在一个数字上调用一个方法，比如上面例子中的 toString，那么我们需要在它后面放置两个点 ..</span>
<span class="token comment">// 如果放置一个点：123456.toString(36)，那么就会出现一个 error，因为 JavaScript 语法隐含了第一个点之后的部分为小数部分</span>
<span class="token comment">// 如果我们再放一个点，那么 JavaScript 就知道小数部分为空，然后调用该方法</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><br><p><strong>常用方法</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 向下取整</span>
Math<span class="token punctuation">.</span>floor

<span class="token comment">// 向上取整</span>
Math<span class="token punctuation">.</span>ceil

<span class="token comment">//  四舍五入</span>
Math<span class="token punctuation">.</span>round

<span class="token comment">// 单单舍弃小数点后的内容，而不进行四舍五入操作（不支持 IE）</span>
Math<span class="token punctuation">.</span>trunc

<span class="token comment">// 四舍五入，保留小数点后 n 位，返回结果是字符串</span>
Number<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
<span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span>
<span class="token comment">// 将结果转换为数字</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token operator">+</span>sum<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">// 将其参数转换为数字，然后测试它是否为 NaN</span>
<span class="token function">isNaN</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> 
<span class="token comment">// 不能只使用 === NaN 比较吗？</span>
<span class="token comment">// 不行。值 “NaN” 是独一无二的，它不等于任何东西，包括它自身</span>
<span class="token comment">// js 傻逼吧？🙄</span>

<span class="token comment">// 将其参数转换为数字，如果是常规数字，则返回 true</span>
<span class="token comment">// 有时 isFinite 被用于验证字符串值是否为常规数字</span>
<span class="token function">isFinite</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> 
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><br><p><strong><code>parseInt</code> 和 <code>parseFloat</code></strong></p><p>使用加号 <code>+</code> 或 <code>Number()</code> 的数字转换是严格的。如果一个值不完全是一个数字，就会失败。此时可以使用<code>parseInt</code>和<code>parseFloat</code>。</p><p>它们可以从字符串中“读取”数字，直到无法读取为止。如果发生错误，则返回收集到的数字。函数 <code>parseInt</code> 返回一个整数，而 <code>parseFloat</code> 返回一个浮点数</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&#39;10001px100&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 10001</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&#39;100px&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&#39;12.5em&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12.5</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&#39;12.3&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12，只有整数部分被返回了</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&#39;12.3.4&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12.3，在第二个点出停止了读取</span>

<span class="token comment">// 某些情况下，parseInt/parseFloat 会返回 NaN</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&#39;a123&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN，第一个符号停止了读取</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><br><p><strong><code>parseInt(str, radix)</code> 的第二个参数</strong></p><p><code>parseInt()</code> 函数具有可选的第二个参数。它指定了数字系统的基数，因此 <code>parseInt</code> 还可以解析十六进制数字、二进制数字等的字符串</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&#39;0xff&#39;</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 255</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&#39;ff&#39;</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 255，没有 0x 仍然有效</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&#39;2n9c&#39;</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123456</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank" rel="noopener noreferrer">更多</a>关于<code>Number</code>的内容</li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math" target="_blank" rel="noopener noreferrer">更多</a>关于<code>Math</code>的内容</li></ul></blockquote><br><h4 id="_2-2-2-bigint" tabindex="-1">2.2.2 <strong>BigInt</strong> <a class="header-anchor" href="#_2-2-2-bigint" aria-hidden="true">#</a></h4><p><code>Number</code>的范围是<code>-2^53 ~ 2^53</code>。对于超过或者小于<code>Number</code>类型的整数，例如用于加密或者微秒精度的时间戳，可以使用<code>BigInt</code>来表示。<code>BigInt</code>可以表示任意长度的整数，创建时需要在数值的末尾加上<code>n</code>来表示这是一个<code>BigInt</code>类型。</p><div class="language-javascript line-numbers-mode"><pre><code><span class="token comment">// 尾部的 &quot;n&quot; 表示这是一个 BigInt 类型</span>
<span class="token keyword">const</span> bigInt <span class="token operator">=</span> <span class="token number">1234567890123456789012345678901234567890n</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noopener noreferrer">更多</a>关于<code>BigInt</code>的内容</p></blockquote><br><h4 id="_2-2-3-string" tabindex="-1">2.2.3 <strong>String</strong> <a class="header-anchor" href="#_2-2-3-string" aria-hidden="true">#</a></h4><p>在 JavaScript 中有3种字符串比表达方式：</p><p>1、单引号</p><p>2、双引号</p><p>3、反引号</p><div class="language-javascript line-numbers-mode"><pre><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str2 <span class="token operator">=</span> <span class="token string">&#39;World&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// 反引号常用作变量嵌入，或者表达式嵌入</span>
<span class="token keyword">let</span> str3 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">can embed another </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// 反引号还支持换行</span>
<span class="token keyword">let</span> str4 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
line1
*
line2
*
line3
</span><span class="token template-punctuation string">`</span></span>

<span class="token comment">// 特殊字符需要使用 \ 来进行转义</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><br><p><strong><code>length</code>属性</strong></p><ul><li><code>str.length</code></li></ul><p>与其他语言的<code>length()</code>方法不同，JavaScript 中<code>length</code>是字符串的一个属性</p><br><p><strong>访问字符</strong></p><ul><li><code>str[index]</code></li><li><code>str.charAt(index)</code></li></ul><p>在 JavaScript 中，字符串类型可以通过中括号<code>[index]</code>和<code>chatAt(index)</code>方法来访问某个下标的字符内容。相对来说使用中括号访问是一种更为现代的方法，这两种方法不同的地方在于如果访问的位置不存在字符内容，<code>[]</code>返回<code>undefined</code>，而<code>charAt</code>返回空字符。</p><br><p><strong>遍历字符</strong></p><p>可以使用<code>for...of</code>循环来遍历字符</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;abcdefg&#39;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> s <span class="token keyword">of</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// a</span>
<span class="token comment">// b</span>
<span class="token comment">// c</span>
<span class="token comment">// ...</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><br><p><strong>截取字符</strong></p><ul><li><p><code>slice(start[, end])</code>，返回一个字符串，从 start 开始，到 end 结束，但不包括 end（start 不能大于 end）。end 可以忽略，表现结果即为从 start 开始，一直到末尾。支持负值（逆序，最后一个字符下标为 -1）。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;abcdegf&#39;</span>

<span class="token keyword">let</span> str1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// cdegf</span>

<span class="token keyword">let</span> str2 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// cd</span>

<span class="token keyword">let</span> str3 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// deg</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p><code>substring(start[, end])</code>，与<code>slice()</code>几乎相同。但不支持负值，允许 start 大于 end。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;abcdegfh&#39;</span>

<span class="token comment">// start &gt; end 相当于从 end 开始取到 start，但是不包括 start</span>
<span class="token keyword">let</span> str1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// cdeg</span>
<span class="token comment">// slice 不支持 start &gt; end</span>
<span class="token keyword">let</span> str1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// “”</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p><code>substr(start[, length])</code>，返回从 start 开始，长为<code>length</code>部分的内容。与上面的两个方法相比，允许指定长度而不是结束位置。start 允许为负数</p></li></ul><blockquote><p>❓</p><p><strong>应该使用哪个方法？</strong></p><p>比较推荐<code>slice</code>，相对于其他两个方法来说，<code>slice</code>比较灵活，允许负值，且写法更为简短。</p></blockquote><br><p><strong>字符串值比较</strong></p><p>字符串比较按照字母顺序逐个比较，小写字母总是大于大写字母。在 JavaScript 中所有的字符串都使用<code>UTF-16</code>编码，每个字符都有对应的数字代码。</p><div class="language-js line-numbers-mode"><pre><code><span class="token string">&quot;z&quot;</span><span class="token punctuation">.</span><span class="token function">codePointAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 122</span>
<span class="token string">&quot;Z&quot;</span><span class="token punctuation">.</span><span class="token function">codePointAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 90</span>

String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token comment">// Z</span>
String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">122</span><span class="token punctuation">)</span> <span class="token comment">// z</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">220</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  str <span class="token operator">+=</span> String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~</span>
<span class="token comment">// ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜ</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>正确的字符串比较方式是采用<code>localeCompare()</code>方法</p><div class="language-js line-numbers-mode"><pre><code>str<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span>

<span class="token comment">// 如果 str 排在 str2 前面，则返回负数</span>
<span class="token comment">// 如果 str 排在 str2 后面，则返回正数</span>
<span class="token comment">// 如果它们在相同位置，则返回 0</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noopener noreferrer">更多</a>关于<code>String</code>的内容</p></blockquote><br><h4 id="_2-2-4-null" tabindex="-1">2.2.4 <strong>null</strong> <a class="header-anchor" href="#_2-2-4-null" aria-hidden="true">#</a></h4><p>JavaScript 中<code>null</code>值<strong>不是</strong>代表<strong>引用或者 null 指针</strong>，<strong>而是</strong>代表<strong>值未知、空、无</strong>的特殊类型值</p><br><h4 id="_2-2-5-undefined" tabindex="-1">2.2.5 <strong>undefined</strong> <a class="header-anchor" href="#_2-2-5-undefined" aria-hidden="true">#</a></h4><p>JavaScript 中<code>undefined</code>的含义是<strong>未被赋值</strong>。如果一个变量已被声明，但未被赋值，那么它的值就是<code>undefined</code>。</p><p>根据上述，因此可以显示的给一个变量赋予<code>undefined</code></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">// 将值修改为 undefined</span>
age <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>但是不建议这样做。通常是使用 <code>null</code> 将一个<strong>空</strong>或者<strong>未知</strong>的值赋予变量，而 <code>undefined</code> 则保留作为未进行初始化的事物的默认初始值。</p></blockquote><br><h4 id="_2-2-6-object" tabindex="-1">2.2.6 <strong>Object</strong> <a class="header-anchor" href="#_2-2-6-object" aria-hidden="true">#</a></h4><p><code>Object</code> 类型是一个特殊的类型。其他所有的数据类型都被称为<strong>原始类型/基础类型</strong>，<code>Object</code>则是一个<strong>复杂数据类型</strong>，因为它们的值只包含一个单独的内容（字符串、数字或者其他）。<code>Object</code> 则用于储存数据集合和更复杂的实体。</p><br><h4 id="_2-2-7-symbol" tabindex="-1">2.2.7 <strong>Symbol</strong> <a class="header-anchor" href="#_2-2-7-symbol" aria-hidden="true">#</a></h4><blockquote><p>应用场景：“隐藏”属性（非全局<code>Symbol</code>的使用）、系统<code>Symbol</code>（全局<code>Symbol</code>的使用）</p></blockquote><p>根据 JavaScript 规范，只有两种类型能够用来作为对象的键值：字符串和<code>symbol</code>。如果使用其他类型会被自动转换为字符串：<code>obj[1]</code>等价于<code>obj[&quot;1&quot;]</code>，<code>obj[true]</code>等价于<code>obj[&quot;true&quot;]</code>。</p><blockquote><p><code>Symbol</code> 类型用于<strong>创建对象的唯一标识符</strong>。并且任何<code>Symbol</code>都具有 <code>description</code> 属性</p></blockquote><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 创建一个 Symbol 类型的变量</span>
<span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// Symbol 严格保证是唯一的。</span>
<span class="token comment">// 即使我们创建了许多具有相同描述的 Symbol，它们的值也是不同。描述只是一个标签，不影响任何东西。</span>

<span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> id2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>

id <span class="token operator">==</span> id2 <span class="token comment">// false</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>Symbol</code>类型的变量不会自动转换为字符串</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 类型错误：无法将 symbol 值转换为字符串。</span>

<span class="token comment">// 这是一种防止混乱的“语言保护”，因为字符串和 symbol 有本质上的不同，不应该意外地将它们转换成另一个。</span>
<span class="token comment">// 如果我们真的想显示一个 symbol，需要用它的 toString() 方法</span>

<span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(id)，现在它有效了</span>

<span class="token comment">// 获取 symbol.description 属性</span>
<span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// id</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><br><p><strong>“隐藏”属性</strong></p><blockquote><p>“隐藏”属性并不是真正意义上的“隐藏”，只是外部代码无法访问，并且不显示在<code>for...in</code>而已</p></blockquote><div class="language-js line-numbers-mode"><pre><code><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>因为任何两个<code>Symbol</code>无论描述是否一致都是不相等的，因此可以使用<code>Symbol</code>来创建一个其他部分的代码无法访问到的属性。例如，需要给对象添加标识符：</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// User.js</span>
<span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 在对象字面量中使用 Symbol 需要使用计算属性</span>
    <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 其他部分的代码</span>
<span class="token comment">// index.js</span>
<span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>
user<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token comment">// 无法访问</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><br><p><strong>特别的</strong></p><p>1、<code>Symbol</code>属性在<code>for...in</code>中会被跳过</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> u <span class="token keyword">in</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// output</span>
name
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>2、<code>Object.keys(object)</code>也会忽略<code>Symbol</code>属性</p><p>3、<code>Object.assign(target, source)</code>会同时复制字符串和<code>symbol</code>属性</p><br><p><strong>全局 Symbol</strong></p><p>如上文所说，就算两个<code>Symbol</code>的名字相同，但是本质上它们还是不同的两个对象。但有时其他部分的代码需要访问这个<code>Symbol</code>属性的内容，如何实现？可以使用<strong>全局<code>Symbol</code>注册表</strong>。</p><p>可以在注册表中创建<code>Symbol</code>对象，并在之后使用它们，这就能确保每次访问相同名字的<code>Symbol</code>时，返回的都是相同的<code>Symbol</code>。</p><p>要从注册表中读取<code>Symbol</code>对象，可以使用<code>Symbol.for(key)</code>。该调用会检查全局注册表，如果有一个描述为<code>key</code>的<code>Symbol</code>对象则返回，如果该对象不存在则创建，并存储在注册表中。</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 通过 name 获取 symbol</span>
<span class="token keyword">let</span> sym <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sym2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 通过 symbol 获取 name</span>
<span class="token function">alert</span><span class="token punctuation">(</span> Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name</span>
<span class="token function">alert</span><span class="token punctuation">(</span> Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>sym2<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// id</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>对于全局<code>Symbol</code>来说，不仅有<code>Symbol.for(key)</code>，还有它的反向操作：<code>Symbol.keyFor(symbol)</code>，作用就是根据<code>Symbol</code>返回它的名字。需要注意的是，<code>Symbol.keyFor</code> 内部使用全局<code>Symbol </code>注册表来查找<code>Symbol</code>的键。所以它不适用于非全局<code>Symbol</code>。如果<code>Symbol</code>不是全局的，它将无法找到它并返回 <code>undefined</code>。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> globalSymbol <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> localSymbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>globalSymbol<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name，全局 symbol</span>
<span class="token function">alert</span><span class="token punctuation">(</span> Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>localSymbol<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined，非全局</span>

<span class="token function">alert</span><span class="token punctuation">(</span> localSymbol<span class="token punctuation">.</span>description <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><br><p><strong>系统 Symbol</strong></p><p>JavaScript 内部有很多<strong>系统的</strong><code>Symbol</code>，我们可以使用它们来<strong>微调对象的各个方面</strong>。</p><ul><li><code>Symbol.toPrimitive</code></li><li><code>Symbol.hasInstance</code></li><li><code>Symbol.iterator</code></li><li>…</li></ul><blockquote><p><a href="https://tc39.es/ecma262/#sec-well-known-symbols" target="_blank" rel="noopener noreferrer">更多</a>关于系统<code>Symbol</code>的内容</p></blockquote><br><h3 id="_2-3-类型转换" tabindex="-1">2.3 类型转换 <a class="header-anchor" href="#_2-3-类型转换" aria-hidden="true">#</a></h3><br><p><strong>String 类型转换</strong></p><p>字符串转换最明显。<code>false</code> 变成 <code>&quot;false&quot;</code>，<code>null</code> 变成 <code>&quot;null&quot;</code> 等。</p><br><p><strong>Number 类型转换</strong></p><p>在算术函数和表达式中，会自动进行<code>number</code>类型转换。</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;6&quot;</span> <span class="token operator">/</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3, string 类型的值被自动转换成 number 类型后进行计算</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以使用 <code>Number(value)</code> 显式地将这个 value 转换为<code>number</code>类型。</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// string to number </span>
<span class="token comment">// 去掉首尾空格后的纯数字字符串中含有的数字。如果剩余字符串为空，则转换结果为 0。</span>
<span class="token comment">// 当类型转换出现 error 时返回 NaN。</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 变成 number 类型 123</span>
<span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123</span>

<span class="token comment">// 如果输入的内容不是一个有效的字符串</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;an arbitrary string instead of a number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN，转换失败</span>

<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>

<span class="token comment">// +value 的效果和 Number(value) 的效果相同</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><br><p><strong>Boolean 类型转换</strong></p><ul><li>直观上为<strong>空</strong>的值（如 <code>0</code>、空字符串、<code>null</code>、<code>undefined</code> 和 <code>NaN</code>）变为 <code>false</code>。</li><li>其他值变成 <code>true</code></li></ul><br><h3 id="_2-4-运算符" tabindex="-1">2.4 运算符 <a class="header-anchor" href="#_2-4-运算符" aria-hidden="true">#</a></h3><ul><li>数学运算符</li><li>赋值运算符</li><li>逗号运算符</li><li><code>typeof</code>运算符</li><li>逻辑运算符</li></ul><br><h4 id="_2-4-1-数学运算" tabindex="-1">2.4.1 数学运算 <a class="header-anchor" href="#_2-4-1-数学运算" aria-hidden="true">#</a></h4><p><strong>幂运算</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 求 n 的 m 次方</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> n <span class="token operator">**</span> m
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><br><h4 id="_2-4-2-赋值运算符" tabindex="-1">2.4.2 赋值运算符 <a class="header-anchor" href="#_2-4-2-赋值运算符" aria-hidden="true">#</a></h4><p><strong>链式赋值</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> a <span class="token operator">=</span> b <span class="token operator">=</span> c <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> 
<span class="token comment">// a = 2</span>
<span class="token comment">// b = 2</span>
<span class="token comment">// c = 2</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><br><h4 id="_2-4-3-逗号运算符" tabindex="-1">2.4.3 逗号运算符 <a class="header-anchor" href="#_2-4-3-逗号运算符" aria-hidden="true">#</a></h4><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7（3 + 4 的结果）</span>

<span class="token comment">// 如果没有括号</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span>
<span class="token function">alert</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// 3，后面的表达式不会执行</span>

<span class="token keyword">const</span> <span class="token function-variable function">firstFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;do some thing first&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">secFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;the second function&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">firstFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">secFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> 
<span class="token comment">// do some thing first</span>
<span class="token comment">// the second function</span>
<span class="token comment">// 2</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>第一个语句 <code>1 + 2</code> 运行了，但是它的结果被丢弃了。随后计算 <code>3 + 4</code>，并且该计算结果被返回</p><br><h4 id="_2-4-4-逻辑运算符" tabindex="-1">2.4.4 逻辑运算符 <a class="header-anchor" href="#_2-4-4-逻辑运算符" aria-hidden="true">#</a></h4><br><p><strong>或运算</strong></p><p>1、或运算符<strong>寻找第一个真值</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> result <span class="token operator">=</span> value1 <span class="token operator">||</span> value2 <span class="token operator">||</span> value3<span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或运算符 <code>||</code> 做了如下的事情：</p><ul><li>从左到右依次计算操作数。</li><li>处理每一个操作数时，都将其转化为布尔值。如果结果是 <code>true</code>，就停止计算，返回这个操作数的初始值。</li><li>如果所有的操作数都被计算过（也就是，转换结果都是 <code>false</code>），则返回最后一个操作数。</li></ul><p><strong>返回的值是操作数的初始形式，不会做布尔转换。</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1（1 是真值）</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1（1 是第一个真值）</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1（第一个真值）</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0（都是假值，返回最后一个值）</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>2、或运算短路求值</p><p>这指的是，<code>||</code> 对其参数进行处理，直到达到第一个真值，然后立即返回该值，而无需处理其他参数。</p><div class="language-js line-numbers-mode"><pre><code><span class="token boolean">true</span> <span class="token operator">||</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;not printed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token boolean">false</span> <span class="token operator">||</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;printed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在第一行中，或运算符 || 在遇到 true 时立即停止运算，所以 alert 没有运行。只会打印第二条信息</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><br><p><strong>与运算</strong></p><p>1、与运算<strong>寻找第一个假值</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> result <span class="token operator">=</span> value1 <span class="token operator">&amp;&amp;</span> value2 <span class="token operator">&amp;&amp;</span> value3<span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>与运算 <code>&amp;&amp;</code> 做了如下的事：</p><ul><li>从左到右依次计算操作数。</li><li>在处理每一个操作数时，都将其转化为布尔值。如果结果是 <code>false</code>，就停止计算，并返回这个操作数的初始值。</li><li>如果所有的操作数都被计算过（例如都是真值），则返回最后一个操作数。</li></ul><p>换句话说，与运算返回第一个假值，如果没有假值就返回最后一个值。</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 如果第一个操作数是真值，</span>
<span class="token comment">// 与运算返回第二个操作数：</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>

<span class="token comment">// 如果第一个操作数是假值，</span>
<span class="token comment">// 与运算将直接返回它。第二个操作数会被忽略</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;no matter what&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>⚠</p><p>与运算 <code>&amp;&amp;</code> 的优先级比或运算 <code>||</code> 要高。<strong>与运算</strong> <code>&amp;&amp;</code> <strong>在或运算</strong> <code>||</code> <strong>之前进行</strong></p></blockquote><br><h4 id="_2-4-5-一元操作符" tabindex="-1">2.4.5 一元操作符 <a class="header-anchor" href="#_2-4-5-一元操作符" aria-hidden="true">#</a></h4><h5 id="一元正值-负值符" tabindex="-1">一元正值/负值符 <a class="header-anchor" href="#一元正值-负值符" aria-hidden="true">#</a></h5><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 一元正值</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">1</span>
<span class="token comment">// 加号 + 应用于单个值，对数字没有任何作用</span>
y <span class="token operator">=</span> <span class="token operator">+</span>y
<span class="token function">alert</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token comment">// 1</span>

<span class="token comment">// 如果运算元不是数字，加号 + 则会将其转化为数字。+value 的效果和 Number(value) 的效果相同</span>
<span class="token comment">// 转化非数字</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token operator">+</span><span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token operator">+</span><span class="token string">&quot;&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 0</span>

<span class="token comment">// 一元负值</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span>
x <span class="token operator">=</span> <span class="token operator">-</span>x <span class="token comment">//</span>
<span class="token function">alert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment">// -1</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><br><h5 id="typeof" tabindex="-1">typeof <a class="header-anchor" href="#typeof" aria-hidden="true">#</a></h5><p><code>typeof</code> 运算符返回参数的类型。可以进行数据类型检验。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">typeof</span> <span class="token keyword">undefined</span> <span class="token comment">// &quot;undefined&quot;</span>

<span class="token keyword">typeof</span> <span class="token number">0</span> <span class="token comment">// &quot;number&quot;</span>

<span class="token keyword">typeof</span> <span class="token number">10n</span> <span class="token comment">// &quot;bigint&quot;</span>

<span class="token keyword">typeof</span> <span class="token boolean">true</span> <span class="token comment">// &quot;boolean&quot;</span>

<span class="token keyword">typeof</span> <span class="token string">&quot;foo&quot;</span> <span class="token comment">// &quot;string&quot;</span>

<span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token comment">// &quot;symbol&quot;</span>

<span class="token comment">// Math 是一个提供数学运算的内置 object</span>
<span class="token keyword">typeof</span> Math <span class="token comment">// &quot;object&quot;</span>

<span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token comment">// &quot;object&quot;</span>

<span class="token comment">// typeof null 的结果为 &quot;object&quot;。这是官方承认的 typeof 的错误，这个问题来自于 JavaScript 语言的早期阶段，并为了兼容性而保留了下来。null 绝对不是一个 object。null 有自己的类型，它是一个特殊值。typeof 的行为在这里是错误的。</span>
<span class="token comment">// check link: https://zh.javascript.info/types#type-typeof</span>

<span class="token comment">// JavaScript 中的基本数据类型都存储在 32 位的二进制单元当中，低三位的数字用于表示该数据的类型。object 的前三位是 0，null 的二进制表示是全 0。typeof 的实现就是通过判断低三位的数字来判断值类型的，因此 typeof null 会返回结果“object”</span>

<span class="token comment">//  alert 在 JavaScript 中是一个函数</span>
<span class="token keyword">typeof</span> alert <span class="token comment">// &quot;function&quot;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><blockquote><p><code>typeof(X)</code>语法与<code>typeof X</code>相同</p></blockquote><br><h5 id="delete" tabindex="-1">delete <a class="header-anchor" href="#delete" aria-hidden="true">#</a></h5><p><code>delete</code> 操作符用于删除一个对象的属性或者一个数组中某一个键值</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// objectName 是一个对象名，property 是一个已经存在的属性</span>
<span class="token keyword">delete</span> objectName<span class="token punctuation">.</span>property<span class="token punctuation">;</span>
<span class="token comment">// index 是数组中的一个已经存在的键值的索引值</span>
<span class="token keyword">delete</span> objectName<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>只能使用 <code>delete</code> 删除各种各样的隐式声明的变量</strong>， 被<code>var/let/const</code>声明的显式变量则不能删除。</p><div class="language-js line-numbers-mode"><pre><code>x <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">43</span><span class="token punctuation">;</span>
myobj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myobj<span class="token punctuation">.</span>h <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">// create property h</span>
<span class="token keyword">delete</span> x<span class="token punctuation">;</span>       <span class="token comment">// returns true (can delete if declared implicitly)</span>
<span class="token keyword">delete</span> y<span class="token punctuation">;</span>       <span class="token comment">// returns false (cannot delete if declared with var)</span>
<span class="token keyword">delete</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span> <span class="token comment">// returns false (cannot delete predefined properties)</span>
<span class="token keyword">delete</span> myobj<span class="token punctuation">.</span>h<span class="token punctuation">;</span> <span class="token comment">// returns true (can delete user-defined properties)</span>
<span class="token keyword">delete</span> myobj<span class="token punctuation">;</span>   <span class="token comment">// returns true (can delete if declared implicitly)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><p><strong>删除数组元素</strong></p><p>删除数组中的元素时，数组的长度是不变的，例如删除<code>a[3]</code>, <code>a[4]</code>，<code>a[4]</code>和<code>a[3]</code> 仍然存在，只是值变成了<code>undefined</code>。</p><blockquote><p>⚠</p><p>如果想让数组中存在一个元素，但是值为<code>undefined</code>，应该使用<code>undefined</code>关键字赋值，而不是<code>delete</code>操作</p></blockquote><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" target="_blank" rel="noopener noreferrer">更多</a>关于<code>delete</code>的内容</p></blockquote><br><h5 id="void" tabindex="-1">void <a class="header-anchor" href="#void" aria-hidden="true">#</a></h5><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/void" target="_blank" rel="noopener noreferrer">更多</a>关于<code>void</code>的内容</p></blockquote><br><h4 id="_2-4-6-关系操作符" tabindex="-1">2.4.6 关系操作符 <a class="header-anchor" href="#_2-4-6-关系操作符" aria-hidden="true">#</a></h4><h5 id="in" tabindex="-1">in <a class="header-anchor" href="#in" aria-hidden="true">#</a></h5><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in" target="_blank" rel="noopener noreferrer">in 操作符</a>，如果所指定的<strong>属性</strong>确实存在于所指定的对象中，则会返回<code>true</code></p><div class="language-js line-numbers-mode"><pre><code>propNameOrNumber <span class="token keyword">in</span> objectName
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在这里<code>propNameOrNumber </code>可以是一个代表着属性名的字符串或者是一个代表着数组索引的数值表达式，而<code>objectName</code>则是一个对象名。</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// Arrays</span>
<span class="token keyword">var</span> trees <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">&quot;redwood&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bay&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cedar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;oak&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;maple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">0</span> <span class="token keyword">in</span> trees<span class="token punctuation">;</span>        <span class="token comment">// returns true</span>
<span class="token number">3</span> <span class="token keyword">in</span> trees<span class="token punctuation">;</span>        <span class="token comment">// returns true</span>
<span class="token number">6</span> <span class="token keyword">in</span> trees<span class="token punctuation">;</span>        <span class="token comment">// returns false</span>
<span class="token string">&quot;bay&quot;</span> <span class="token keyword">in</span> trees<span class="token punctuation">;</span>    <span class="token comment">// returns false (you must specify the index number,</span>
                   <span class="token comment">// not the value at that index)</span>
<span class="token string">&quot;length&quot;</span> <span class="token keyword">in</span> trees<span class="token punctuation">;</span> <span class="token comment">// returns true (length is an Array property)</span>

<span class="token comment">// Predefined objects</span>
<span class="token string">&quot;PI&quot;</span> <span class="token keyword">in</span> Math<span class="token punctuation">;</span>          <span class="token comment">// returns true</span>
<span class="token keyword">var</span> myString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;coral&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token string">&quot;length&quot;</span> <span class="token keyword">in</span> myString<span class="token punctuation">;</span>  <span class="token comment">// returns true</span>

<span class="token comment">// Custom objects</span>
<span class="token keyword">var</span> mycar <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">make</span><span class="token operator">:</span> <span class="token string">&quot;Honda&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">model</span><span class="token operator">:</span> <span class="token string">&quot;Accord&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">year</span><span class="token operator">:</span> <span class="token number">1998</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token string">&quot;make&quot;</span> <span class="token keyword">in</span> mycar<span class="token punctuation">;</span>  <span class="token comment">// returns true</span>
<span class="token string">&quot;model&quot;</span> <span class="token keyword">in</span> mycar<span class="token punctuation">;</span> <span class="token comment">// returns true</span>

<span class="token comment">// 如果省略引号，就意味着左边是一个变量，它应该包含要判断的实际属性名。例如：</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> key <span class="token keyword">in</span> user <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true，属性 &quot;age&quot; 存在</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><br><h5 id="instanceof" tabindex="-1">instanceof <a class="header-anchor" href="#instanceof" aria-hidden="true">#</a></h5><p>如果所判别的对象确实是所指定的类型，则返回<code>true</code>。</p><div class="language-js line-numbers-mode"><pre><code>objectName <span class="token keyword">instanceof</span> <span class="token class-name">objectType</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>objectName</code> 是需要做判别的对象的名称，<code>objectType</code>是假定的对象的类型</p><p>当你需要确认一个对象在运行时的类型时，可使用<code>instanceof</code>。例如，需要<code>catch</code>异常时，你可以针对抛出异常的类型，来做不同的异常处理</p><br><h4 id="_2-4-7-空值合并运算符" tabindex="-1">2.4.7 空值合并运算符 <a class="header-anchor" href="#_2-4-7-空值合并运算符" aria-hidden="true">#</a></h4><p>空值合并运算符（nullish coalescing operator）的写法为两个问号 <code>??</code>。由于它对待 <code>null</code> 和 <code>undefined</code> 的方式类似，暂且将值既不是 <code>null</code> 也不是 <code>undefined</code> 的表达式称为<em>已定义的（defined）</em>，与之进行区分。</p><p><code>a ?? b</code> 的结果是：</p><ul><li>如果 <code>a</code> 是已定义的，则结果为 <code>a</code></li><li>如果 <code>a</code> 不是已定义的，则结果为 <code>b</code></li></ul><p>即如果第一个参数不是 <code>null/undefined</code>，则 <code>??</code> 返回第一个参数。否则，返回第二个参数。</p><br><p><strong>与或运算对比</strong></p><p>或运算符 <code>||</code> 可以以与 <code>??</code> 运算符相同的方式使用。它们之间重要的区别是：</p><ul><li><code>||</code> 返回第一个 <strong>真</strong> 值。</li><li><code>??</code> 返回第一个 <strong>已定义的</strong> 值。</li></ul><p><code>||</code> 无法区分 <code>false</code>、<code>0</code>、空字符串 <code>&quot;&quot;</code> 和 <code>null/undefined</code>，对于<code>||</code>来说它们都是假值（falsy value），如果其中任何一个是 <code>||</code> 的第一个参数，那么我们将得到第二个参数作为结果。</p><p>在实际中，我们可能只想在变量的值为 <code>null/undefined</code> 时使用默认值。也就是说，当该值确实未知或未被设置时，考虑下面这种情况：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> height <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>height <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
<span class="token function">alert</span><span class="token punctuation">(</span>height <span class="token operator">??</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>高度 <code>0</code> 是一个有效值，它不应该被替换为默认值。所以 <code>??</code> 运算得到的是正确的结果。</p><blockquote><p>⚠</p><p>出于安全原因，JavaScript 禁止将 <code>??</code> 运算符与 <code>&amp;&amp;</code> 和 <code>||</code> 运算符一起使用，除非使用括号明确指定了优先级。</p></blockquote><br><h3 id="_2-5-值比较" tabindex="-1">2.5 值比较 <a class="header-anchor" href="#_2-5-值比较" aria-hidden="true">#</a></h3><p><strong>比较运算符</strong></p><ul><li>大于等于<code>&gt;=</code>，小于等于<code>&lt;=</code></li><li>值相等<code>==</code>，会自动进行类型转换，然后进行值比较</li><li>严格相等<code>===</code>，不会进行类型转换，比较值和类型</li><li>不相等<code>!=</code>，严格不等<code>!==</code></li></ul><br><p><strong>字符串比较</strong></p><p>字符串是按字符（母）根据<strong>Unicode 编码顺序</strong>逐个进行比较的</p><br><p><strong>不同类型比较</strong></p><p>当对不同类型的值进行比较时，JavaScript 会首先将其转化为数字（number）再判定大小。</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&#39;2&#39;</span> <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true，字符串 &#39;2&#39; 会被转化为数字 2</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&#39;01&#39;</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true，字符串 &#39;01&#39; 会被转化为数字 1</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><br><p><strong>null 和 undefined 比较</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// JavaScript 存在一个特殊的规则，会判定它们相等</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token comment">// true</span>
<span class="token keyword">null</span> <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token comment">// false</span>

<span class="token comment">// 到这里可能感觉有点傻逼🤮。</span>
<span class="token comment">// 根据上文，当对不同类型的值进行比较时，JavaScript 会将它们转化未数值类型进行比较</span>
<span class="token comment">// Number(null) = 0</span>
<span class="token comment">// Number(undefined) = NaN</span>
<span class="token comment">// 0 == NaN 结果为 false</span>
<span class="token comment">// 但 null 与 undefined 进行 == 比较时，结果却为 true？</span>
<span class="token comment">// 往下看</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><br><p><strong>特别的现象</strong></p><div class="language-javascript line-numbers-mode"><pre><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// (1) false</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (2) false</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (3) true</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>会出现这种反常结果，这是因为<strong>相等性检查 <code>==</code> 和普通比较符 <code>&gt;、&lt;、&gt;=、&lt;=</code> 的代码逻辑是相互独立的</strong>。</p><p><strong>进行值的比较时，<code>null</code>和<code>undefined</code> 会被转化为数字</strong>，此处<code>null</code>被转化为了 <code>0</code>。所以 （1）和（3）结果为true。</p><p>另一方面，<strong><code>undefined</code> 和 <code>null</code> 在相等性检查 <code>==</code> 中不会进行任何的类型转换，它们有自己独立的比较规则，所以除了它们之间互等外，不会等于任何其他的值</strong>。这就解释了为什么（2）中 <code>null == 0</code> 会返回 false。</p><br><p><strong>如何避免</strong></p><ul><li>除了严格相等 <code>===</code> 外，其他但凡是有 <code>undefined/null</code> 参与的比较，都需要仔细分辨。</li><li>除非你非常清楚自己在做什么，否则永远不要使用 <code>&gt;= &gt; &lt; &lt;=</code> 去比较一个可能为 <code>null/undefined</code> 的变量。对于取值可能是 <code>null/undefined</code> 的变量，请按需要分别检查它的取值情况。</li></ul><br><h3 id="_2-6-switch-语句" tabindex="-1">2.6 switch 语句 <a class="header-anchor" href="#_2-6-switch-语句" aria-hidden="true">#</a></h3><ul><li><code>switch</code> 语句有至少一个 <code>case</code> 代码块和一个可选的 <code>default</code> 代码块。</li><li><code>switch</code> 和<code>case</code>值进行的是<strong>严格相等</strong>的比较</li></ul><p><strong>case 分组</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;Right!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token comment">// (*) 下面这两个 case 被分在一组</span>
  <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;Wrong!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Why don&#39;t you take a math class?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>

  <span class="token keyword">default</span><span class="token operator">:</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;The result is strange. Really.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><br><h3 id="_2-7-for-循环" tabindex="-1">2.7 for 循环 <a class="header-anchor" href="#_2-7-for-循环" aria-hidden="true">#</a></h3><h4 id="break-continue-标签" tabindex="-1">break/continue 标签 <a class="header-anchor" href="#break-continue-标签" aria-hidden="true">#</a></h4><p>有时候我们需要一次从多层嵌套的循环中跳出来。例如，下述代码中有两个循环：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 想从这里退出并直接执行 alert(&#39;Done!&#39;)，可以 break 到相应的标签退出</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;Done!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>标签</strong> 是在循环之前带有冒号的标识符：</p><div class="language-js line-numbers-mode"><pre><code><span class="token literal-property property">labelName</span><span class="token operator">:</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>break &lt;labelName&gt;</code> 语句跳出循环至标签处</p><div class="language-js line-numbers-mode"><pre><code><span class="token literal-property property">outer</span><span class="token operator">:</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 中断并跳出这两个循环。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">break</span> outer<span class="token punctuation">;</span> <span class="token comment">// (1)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;Done!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (2)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>上述代码中，<code>break outer</code> 向上寻找名为 <code>outer</code> 的标签并跳出当前循环。因此，代码运行直接从 <code>(1)</code> 转至 <code>(2)</code>。</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 还可以将标签移至单独一行：</span>
<span class="token literal-property property">outer</span><span class="token operator">:</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>continue</code> 指令也可以与标签一起使用。在这种情况下，执行跳转到标记循环的下一次迭代。</p><p><code>break/continute</code> 指令必须在代码块内。从技术上讲，任何被标记的代码块都有效，例如：</p><div class="language-js line-numbers-mode"><pre><code><span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">break</span> label<span class="token punctuation">;</span> <span class="token comment">// 有效</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong><code>for...in</code>和<code>for...of</code></strong></p><ul><li><p><code>for...in</code>遍历的是对象的属性名称（键），如果遍历<code>Array</code>对象，拿到的是<code>Array</code>对象的属性名，如下标和<code>length</code>等。</p><p><code>for..in</code> 循环适用于普通对象，并且做了对应的优化。但通常来说，不应该使用<code>for...in</code>来遍历数组，因为<code>for...in</code>会遍历所有属性，不仅仅是数组下标，还有其他额外的属性。</p></li><li><p><code>for...of</code>遍历的是对象的属性值（值），如果遍历<code>Array</code>对象，拿到的是每个元素的值。</p></li></ul><blockquote><p>⚠</p><p><code>for...of</code> 不能遍历普通对象，准确的来说是不能遍历不可迭代的对象。</p></blockquote><br><h3 id="_2-8-函数" tabindex="-1">2.8 函数 <a class="header-anchor" href="#_2-8-函数" aria-hidden="true">#</a></h3><blockquote><p><strong>在 JavaScript 中，无论函数如何创建，它始终都是一个值/一个变量</strong>。可以当作参数传递、可以作为返回值、也可以赋值给其他变量</p></blockquote><h4 id="_2-8-1-函数形态" tabindex="-1">2.8.1 函数形态 <a class="header-anchor" href="#_2-8-1-函数形态" aria-hidden="true">#</a></h4><div class="language-javascript line-numbers-mode"><pre><code><span class="token comment">// 函数声明</span>
<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数的声明形态&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 匿名函数</span>
<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数表达式 之一</span>
<span class="token keyword">let</span> <span class="token function-variable function">func0</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数的表达式形态&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数表达式 之二 </span>
<span class="token comment">// IIFE（Immediately-Invoked Function Expression，立即执行函数）</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是立即运行的匿名函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 声明函数，并立即执行</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">func11</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    consoloe<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token comment">// 声明函数，传入参数，并立即执行</span>

<span class="token comment">// 函数的嵌套形态</span>
<span class="token keyword">let</span> <span class="token function-variable function">func2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数的嵌套形态&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token function-variable function">func3</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;func2嵌套在func1里&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数的闭包形态</span>
<span class="token keyword">let</span> <span class="token function-variable function">func4</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">&quot;func4&quot;</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是以闭包形态存在的函数: &quot;</span> <span class="token operator">+</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 箭头函数</span>
<span class="token keyword">let</span> <span class="token function-variable function">func_arr</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 直接通过函数名并不能调用函数，需要在函数名后面加上括号，才能调用函数，执行函数体内的代码</span>
<span class="token comment">// 所有的函数都通过一对括号“()”调用</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">func4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">func_arr</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 将函数赋值给一个变量</span>
<span class="token keyword">let</span> newFunc <span class="token operator">=</span> func
<span class="token comment">// 调用 newFunc</span>
<span class="token function">newFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><br><h4 id="_2-8-2-函数声明与函数表达式" tabindex="-1">2.8.2 函数声明与函数表达式 <a class="header-anchor" href="#_2-8-2-函数声明与函数表达式" aria-hidden="true">#</a></h4><p><strong>创建与调用时机</strong></p><ul><li><p>在函数声明被定义之前，它就可以被调用。</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello, John</span>

<span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>函数表达式是在代码执行到达时被创建，并且仅从那一刻起可用。</p></li></ul><div class="language-js line-numbers-mode"><pre><code><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span>

<span class="token keyword">let</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// (*) no magic any more</span>
  <span class="token function">alert</span><span class="token punctuation">(</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><br><p><strong>使用场景</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 以下情况使用函数表达式，其他情况使用函数声明可以使得代码的可读性更好</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&quot;What is your age?&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> welcome<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>age <span class="token operator">&lt;</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">welcome</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">welcome</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Greetings!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">welcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 现在可以了</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><br><h4 id="_2-8-3-iife-立即执行函数" tabindex="-1">2.8.3 IIFE 立即执行函数 <a class="header-anchor" href="#_2-8-3-iife-立即执行函数" aria-hidden="true">#</a></h4><blockquote><p>IIFE（Immediately-Invoked Function Expression，立即执行函数）</p></blockquote><p><strong>IIFE 实现自身调用</strong></p><p>每个函数都有个 <code>arguments</code> 属性，代表函数参数的集合，该集合又有一个方法叫 <code>callee</code>，代表函数本身，这样就可以通过 <code>arguments.callee()</code> 调用了自身</p><div class="language-js line-numbers-mode"><pre><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;第&quot;</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">&quot;次调用&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> i<span class="token operator">&lt;</span><span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//递归出口</span>
        arguments<span class="token punctuation">.</span><span class="token function">callee</span><span class="token punctuation">(</span><span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>⚠️</p><p>在严格模式下，第 5 版 ECMAScript （ES 5） 已经禁止使用<code>arguments.callee()</code>。当一个函数必须调用自身的时候，不推荐使用<code>arguments.callee()</code>，尽量通过函数命名然后通过该名字调用自身。</p></blockquote><br><h4 id="_2-8-4-箭头函数" tabindex="-1">2.8.4 箭头函数 <a class="header-anchor" href="#_2-8-4-箭头函数" aria-hidden="true">#</a></h4><p>用<code>(参数) =&gt; { 表达式 }</code>这种写法声明一个函数，就叫箭头函数（也叫<code>lamda 表达式</code>）。箭头函数是 ES 6 的语法糖之一，主要意图是定义轻量级的内联回调函数。用<code>function</code>关键字声明一个匿名函数，和用箭头<code>=&gt;</code>声明函数是等效的。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>⚠️</p><p>1、箭头函数不暴露<code>aguments</code>对象，如访问<code>arguments</code>，将会当做一个普通变量进行访问；</p><p>2、箭头函数一个明显作用就是可以<strong>保持<code>this</code>的指向</strong>，总是指向定义它时所在的上下文环境；</p><p>3、箭头函数没有自己的 <code>super</code>或 <code>new.target</code>。即箭头函数不能作为构造函数，因此无法被<code>new</code>操作，也就没有<code>new.target</code>。</p></blockquote><br><h4 id="_2-8-5-回调函数" tabindex="-1">2.8.5 回调函数 <a class="header-anchor" href="#_2-8-5-回调函数" aria-hidden="true">#</a></h4><p>如下代码所示，<code>ask</code> 的两个参数值 <code>showOk</code> 和 <code>showCancel</code> 可以被称为 <strong>回调函数</strong> 或简称 <strong>回调</strong>。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token parameter">question<span class="token punctuation">,</span> yes<span class="token punctuation">,</span> no</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span>question<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">yes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">no</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">showOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;You agreed.&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">showCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;You canceled the execution.&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 用法：函数 showOk 和 showCancel 被作为参数传入到 ask</span>
<span class="token function">ask</span><span class="token punctuation">(</span><span class="token string">&quot;Do you agree?&quot;</span><span class="token punctuation">,</span> showOk<span class="token punctuation">,</span> showCancel<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><br><h4 id="_2-8-6-高阶函数" tabindex="-1">2.8.6 高阶函数 <a class="header-anchor" href="#_2-8-6-高阶函数" aria-hidden="true">#</a></h4><blockquote><p>如果某个函数可以接收另一个函数作为参数，该函数就称之为高阶函数。高阶函数的概念源自于函数式编程。</p></blockquote><p>高阶函数最常见的形式之一就是回调函数。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;高阶函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><p><strong>函数重载</strong></p><blockquote><p>所谓重载，就是函数名称一样，但是随着传入的参数个数不一样，调用的逻辑或返回的结果会不一样。重载是面向对象编程语言（比如 Java、C#）里的特性，<strong>JavaScript 并不支持该特性</strong>。</p></blockquote><br><h3 id="_2-9-对象" tabindex="-1">2.9 对象 <a class="header-anchor" href="#_2-9-对象" aria-hidden="true">#</a></h3><h4 id="_2-9-1-计算属性" tabindex="-1">2.9.1 计算属性 <a class="header-anchor" href="#_2-9-1-计算属性" aria-hidden="true">#</a></h4><p>当创建一个对象时，可以<strong>在对象字面量中使用方括号</strong>。这叫做<strong>计算属性</strong>。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> fruit <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&quot;Which fruit to buy?&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;apple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bag <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>fruit<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// 属性名是从 fruit 变量中得到的</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> bag<span class="token punctuation">.</span>apple <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 fruit=&quot;apple&quot;，输出 5 </span>

<span class="token comment">// same as below</span>

<span class="token keyword">let</span> fruit <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&quot;Which fruit to buy?&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;apple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bag <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 从 fruit 变量中获取值</span>
bag<span class="token punctuation">[</span>fruit<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>可以在方括号中使用更复杂的表达式：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> fruit <span class="token operator">=</span> <span class="token string">&#39;apple&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bag <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>fruit <span class="token operator">+</span> <span class="token string">&#39;Computers&#39;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token comment">// bag.appleComputers = 5</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>方括号比点符号更强大。它允许任何属性名和变量。大部分请款下，当属性名是已知且简单的时候，就使用点符号。如果需要一些更复杂的内容，那么就用方括号。</p><br><h4 id="_2-9-2-for…in-循环" tabindex="-1">2.9.2 for…in 循环 <a class="header-anchor" href="#_2-9-2-for…in-循环" aria-hidden="true">#</a></h4><p>为了遍历一个对象的所有键（key），可以使用一个特殊形式的循环：<code>for..in</code></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 对此对象属性中的每个键执行的代码</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br><h4 id="_2-9-3-对象属性名" tabindex="-1">2.9.3 对象属性名 <a class="header-anchor" href="#_2-9-3-对象属性名" aria-hidden="true">#</a></h4><p><strong>属性名限制</strong></p><p>JavaScript 对象的<strong>属性名没有限制</strong>。属性名<strong>可以是任何字符串或者<code>symbol</code>类型</strong>，使用其他类型作为属性名会自动转为字符串。</p><p>需要注意的一点是，<code>__proto__</code>这个属性名是 JavaScript 预留的与<strong>对象原型</strong>有关的属性，无法将它设置成<strong>非对象</strong>的值</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 分配一个数字</span>
<span class="token function">alert</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Object]，值为对象，与预期结果不同</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br><p><strong>属性名顺序</strong></p><blockquote><p>遍历一个对象，获取属性的顺序是和属性添加时的顺序相同吗？在 JavaScript 对象中，<strong>整数属性会被进行排序，其他属性则按照创建的顺序显示</strong>。<strong>整数属性</strong>指的是一个可以在不做任何更改的情况下与一个整数进行相互转换的字符串。</p></blockquote><p>整数属性例子如下：</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 不同国家电话号码区号</span>
<span class="token keyword">let</span> codes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;49&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Germany&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;41&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Switzerland&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;44&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Great Britain&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// ..,</span>
  <span class="token string-property property">&quot;1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;USA&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> code <span class="token keyword">in</span> codes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, 41, 44, 49</span>
<span class="token punctuation">}</span>

<span class="token comment">// 因为这些电话号码是整数，所以它们以升序排列。所以我们看到的是 1, 41, 44, 49。</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>如果属性名不是整数，那它们就按照创建时的顺序来排序，例如：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">surname</span><span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token comment">// 增加一个</span>

<span class="token comment">// 非整数属性是按照创建的顺序来排列的</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span> prop <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name, surname, age</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>为了解决电话号码的问题，我们可以使用非整数属性名来 <strong>欺骗</strong> 程序。只需要给每个键名加一个加号 <code>&quot;+&quot;</code> 前缀就行了：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> codes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;+49&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Germany&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;+41&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Switzerland&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;+44&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Great Britain&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// ..,</span>
  <span class="token string-property property">&quot;+1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;USA&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> code <span class="token keyword">in</span> codes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span> <span class="token operator">+</span>code <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 49, 41, 44, 1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><br><h4 id="_2-9-4-对象引用和拷贝" tabindex="-1">2.9.4 对象引用和拷贝 <a class="header-anchor" href="#_2-9-4-对象引用和拷贝" aria-hidden="true">#</a></h4><p><strong>引用</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 创建一个对象</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 变量 obj 存储的不是对象的本身，而是对象在内存中的地址，也就是对象的引用</span>

<span class="token comment">// 将对象变量赋值给其他变量</span>
<span class="token keyword">let</span> newObj <span class="token operator">=</span> obj

<span class="token comment">// 对象自身并没有被复制，而是将对象的引用复制了一份，保存在 newObj 中</span>

<span class="token comment">// obj 和 newObj 指向的都是同一个对象</span>
obj <span class="token operator">==</span> newObj <span class="token comment">// true</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

a <span class="token operator">==</span> b <span class="token comment">// false</span>
<span class="token comment">// 虽然 a 和 b 指向的对象内容都为空，但是它们指向的是两个不同的对象</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><br><p><strong>浅拷贝</strong></p><p>1、使用 <code>for...in</code> 循环</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> property <span class="token keyword">in</span> sourceObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">[</span>property<span class="token punctuation">]</span> <span class="token operator">=</span> sourceObj<span class="token punctuation">[</span>property<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2、使用 <code>Object.assign(target, sourceObject)</code></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> sourceObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> sourceObj<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>3、解构赋值</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> sourceObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>sourceObj
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><br><p><strong>深拷贝</strong></p><blockquote><p>对于深拷贝，可以使用递归来实现，也可以使用已经实现的 <a href="https://lodash.com/" target="_blank" rel="noopener noreferrer">lodash</a> 库的 <a href="https://lodash.com/docs#cloneDeep" target="_blank" rel="noopener noreferrer">_.cloneDeep(obj)</a></p></blockquote><br><h4 id="_2-9-5-this-关键字" tabindex="-1">2.9.5 this 关键字 <a class="header-anchor" href="#_2-9-5-this-关键字" aria-hidden="true">#</a></h4><p>在没有对象的情况下调用<code>this</code>，<code>this == undefined</code></p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 在这种情况下，严格模式下的 this 值为 undefined</span>
<span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token comment">// 在非严格模式的情况下，this 将会是 全局对象（浏览器中的 window）</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在 JavaScript 中，<code>this</code> 是<em>自由的</em>，它的值是在调用时计算出来的，它的值并不取决于方法声明的位置，而是取决于在<em>点符号前</em>的是什么对象。</p><p>在运行时对 <code>this</code> 求值的这个概念既有优点也有缺点。一方面，函数可以被重用于不同的对象。另一方面，更大的灵活性造成了更大的出错的可能。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&quot;Ilya&quot;</span><span class="token punctuation">,</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token function-variable function">arrow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">arrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

user<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Ilya</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>⚠</p><p>箭头函数中没有自己的<code>this</code>，在箭头函数中使用到的<code>this</code>取决于箭头函数外部的上下文内容。</p></blockquote><br><h4 id="_2-9-6-构造函数" tabindex="-1">2.9.6 构造函数 <a class="header-anchor" href="#_2-9-6-构造函数" aria-hidden="true">#</a></h4><p>构造函数有两个约定：</p><ul><li>命名以大写字母开头</li><li>只能由<code>new</code>操作符执行</li></ul><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>isAdmin <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果没有参数，可以省略括号。</span>
<span class="token comment">// 但是对于 JavaScript 编程规范来说，这不是个好的代码风格</span>
<span class="token comment">// let user = new User</span>

<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// aaa</span>
<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>isAdmin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><br><p><strong>关于 <code>new.target</code></strong></p><p>在一个函数内部，可以使用<code>new.target</code>属性来检查该函数是否被使用<code>new</code>进行调用了。<code>new.target</code>属性的默认值为<code>undefined</code>，使用<code>new</code>调用函数之后，<code>new.target</code>的值等于该函数</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 不带 new</span>
<span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

<span class="token comment">// 带 new</span>
<span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function User { ... }</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>通过检查我们也可以让 <code>new</code> 调用和常规调用做相同的工作</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果你没有通过 new 运行我</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ……我会给你添加 new</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> usr <span class="token operator">=</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token string">&quot;AAA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将调用重定向到新用户</span>
<span class="token function">alert</span><span class="token punctuation">(</span>john<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// AAA</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><br><p><strong>构造函数的<code>return</code></strong></p><p>通常来说，构造函数是没有<code>return</code>语句的，默认返回的是<code>this</code>。如果一个构造函数有<code>return</code>语句：</p><ul><li>如果<code>return</code>的是一个对象，则返回的是这个对象，而不是默认的<code>this</code></li><li>如果<code>return</code>的是一个原始类型，忽略</li></ul><br><h4 id="_2-9-7-new-操作符" tabindex="-1">2.9.7 new 操作符 <a class="header-anchor" href="#_2-9-7-new-操作符" aria-hidden="true">#</a></h4><p>当一个函数被使用<code>new</code>操作符执行时：</p><ul><li>一个新的空对象被创建，并分配给函数的<code>this</code></li><li>函数体执行，通常会修改<code>this</code>，为<code>this</code>添加属性</li><li>返回<code>this</code>的值</li></ul><p>类似的执行流程如下：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// this = {};（隐式创建）</span>

  <span class="token comment">// 添加属性到 this</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>isAdmin <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// return this;（隐式返回）</span>
<span class="token punctuation">}</span>


<span class="token comment">// 使用时</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 等效于</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">isAdmin</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>此时如果我们需要创建很多个不同的对象，可以依次调用<code>new User(name)</code>，代码量比每次都用字面量创建要短很多，这也是<strong>构造器的主要目的，实现可重用的对象创建代码</strong></p><blockquote><p>任何函数（除了箭头函数，它没有自己的 <code>this</code>）都可以用作构造器。即可以通过 <code>new</code> 来运行，它会执行上面的算法。“首字母大写”是一个共同的约定，以明确表示一个函数将被使用 <code>new</code> 来运行。</p></blockquote><br><p><strong>特别的</strong></p><p><mark>使用<code>new</code>操作符来调用构造器 <code>String/Number/Boolean</code> 方法的行为仅供内部使用</mark></p><p>像 Java，允许使用 <code>new Number(1)</code> 或 <code>new Boolean(false)</code> 等语法，明确地为原始类型创建“对象包装器”。</p><p>在 JavaScript 中，由于历史原因，这也是可以的，但极其不推荐。因为这样会出问题。</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;number&quot;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;object&quot;</span>

<span class="token keyword">let</span> zero <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>zero<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// zero 为 true，因为它是一个对象</span>
  <span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;zero is truthy?!?&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>另一方面，调用不带 <code>new</code>的 <code>String/Number/Boolean</code> 函数是完全合理和符合规范的。它们将一个值转换为相应的类型：转成字符串、数字或布尔值（原始类型）。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将字符串转成数字</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br><h4 id="_2-9-8-可选链" tabindex="-1">2.9.8 可选链 <a class="header-anchor" href="#_2-9-8-可选链" aria-hidden="true">#</a></h4><p>如果可选链 <code>?.</code> 前面的值为 <code>undefined</code> 或者 <code>null</code>，它会停止运算并返回 <code>undefined</code>。以<code>value?.property</code>为例：</p><ul><li>如果 <code>value</code> 存在，则结果与 <code>value.property</code> 相同</li><li>否则（当 <code>value</code> 为 <code>undefined/null</code> 时）则返回 <code>undefined</code></li></ul><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// user 没有 address 属性</span>
<span class="token function">alert</span><span class="token punctuation">(</span> user<span class="token operator">?.</span>address<span class="token operator">?.</span>street <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined（不报错）</span>

<span class="token comment">// 如果没有符合的元素，则为 undefined</span>
<span class="token keyword">let</span> html <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.elem&#39;</span><span class="token punctuation">)</span><span class="token operator">?.</span>innerHTML<span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用可选链会带来短路效应。如果 <code>?.</code> 左边部分不存在，就会立即停止运算，如果在 <code>?.</code> 的右侧有任何进一步的函数调用或操作，它们均不会执行。</p><p>可选链 <code>?.</code> 不是一个运算符，而是<strong>一个特殊的语法结构</strong>。它还可以与函数和方括号一起使用。将 <code>?.()</code> 用于调用一个可能不存在的函数，语法 <code>?.[]</code> 也可以使用来调用对象的属性</p><blockquote><p>⚠</p><p>1、不要过度使用可选链</p><p>2、可选链前的变量必须已声明</p><p>3、可以使用可选链来进行安全的读取或删除，但是不能用来写入</p></blockquote><br><h3 id="_2-10-原始值转换" tabindex="-1">2.10 原始值转换 <a class="header-anchor" href="#_2-10-原始值转换" aria-hidden="true">#</a></h3><p>对于两个对象来说，如果进行两个对象相加或者相减，并将结果打印：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span>

obj1 <span class="token operator">+</span> obj2 <span class="token comment">// [object Object][object Object]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这是因为 JavaScript 不允许使用自定义运算符来处理对象。在此类运算的情况下，<strong>对象会被自动转换为原始值（七种原始类型的某一种，主要看重写的方法中返回的是何种类型），然后对这些原始值进行运算，并得到运算结果</strong>。</p><p>转换可以分为三种情况，通常被称为 hint：</p><ul><li>hint 为<code>string</code>，对象到字符串的转换</li><li>hint 是<code>number</code>，对象到数字的转换</li><li>hint 是<code>default</code>，在少数情况下，当期望值不确定时进行的转换</li></ul><p>原始值转换，类似于 Java 中<code>toString/equals/compareTo</code>这几个方法。在 JavaScript 中可以通过重写<code>[Symbol.toPrimitive](hint)/toString/valueOf</code>这几个方法来实现。</p><p>其中，<code>obj[Symbol.toPrimitive](hint)</code>方法的参数 hint 有三种情况：<code>“string”/&quot;number&quot;/&quot;default&quot;</code>，如果某个操作需要将对象转换为字符串来处理，则 hint 为<code>“string”</code>；如果对像本身进行一元数学运算符操作或者和数字类型比较大小，hint 为<code>“number”</code>；其他情况如对象进行<code>==</code>比较， hint 为<code>“default”</code></p><p>这三个方法视情况来调用：</p><ul><li>调用<code>obj[Symbol.toPrimitive](hint)</code>，如果这个方法存在的话</li><li>否则，如果<code>hint</code>是<code>string</code>，尝试调用<code>obj.toString()</code>或者<code>obj.valueOf()</code></li><li>否则，如果<code>hint</code>是<code>number</code>或<code>default</code>，尝试调用<code>obj.valueOf()</code>或者<code>obj.toString()</code></li></ul><p><strong>自定义转换规则</strong></p><blockquote><p>需要使用系统<code>Symbol</code>中的<code>Symbol.toPrimitive</code>来完成，用来给转换方法命名</p></blockquote><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果 Symbol.toPrimitive 方法存在，则它会被用于所有 hint，无需更多其他方法</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// hint = &quot;string&quot;、&quot;number&quot; 或 &quot;default&quot; 中的一个，JavaScript 会根据操作自动进行识别</span>
        <span class="token comment">// 将此对象转换为原始值</span>
        <span class="token comment">// 此方法必须返回一个原始值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">call toPrimitive, hint: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hint<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> hint <span class="token operator">==</span> <span class="token string">&#39;string&#39;</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// obj 对象进行以下操作时会进行原始值转换</span>

<span class="token comment">// 对自身进行一元数学运算符操作</span>
<span class="token function">alert</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// hint: string</span>
<span class="token operator">+</span>obj <span class="token comment">// hint: number</span>
obj <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token comment">// hint: number</span>
obj <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// hint: default</span>
obj <span class="token operator">+</span> <span class="token string">&#39;&#39;</span> <span class="token comment">// hint: default</span>
obj <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// hint: default</span>

<span class="token comment">// 如果没有 [Symbol.toPrimitive](hint) 方法</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;call toString&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;call valueOf&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// toString</span>
<span class="token operator">+</span>obj <span class="token comment">// valueOf</span>
obj <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// valueOf</span>
obj <span class="token operator">+</span> <span class="token string">&#39;&#39;</span> <span class="token comment">// valueOf</span>
obj <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">// valueOf</span>
obj <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token comment">// valueOf</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>如果没有<code>[Symbol.toPrimitive]</code>方法，JavaScript 将尝试寻找 <code>toString</code> 和 <code>valueOf</code> 方法：</p><ul><li>hint 为 <code>&quot;string&quot;</code> ：调用 <code>toString</code> 方法，如果它不存在，则调用 <code>valueOf</code> 方法（对于字符串转换，优先调用 <code>toString</code>）</li><li>对于其他 hint：调用 <code>valueOf</code> 方法，如果它不存在，则调用 <code>toString</code> 方法（对于数学运算，优先调用 <code>valueOf</code> 方法）</li></ul><p><code>toString</code> 和 <code>valueOf</code> 方法很早就出现在 JavaScript 中了，它们都必须返回一个原始值。如果 <code>toString</code> 或 <code>valueOf</code> 返回了一个对象，那么返回值会被忽略（和没有重写这个方法的时候相同）。</p><p>默认情况下，普通对象具有 <code>toString</code> 和 <code>valueOf</code> 方法：</p><ul><li><p><code>toString</code> 方法返回一个字符串 <code>&quot;[object Object]&quot;</code></p></li><li><p><code>valueOf</code> 方法返回对象自身</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;AAA&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Object]</span>
<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><blockquote><p><a href="https://zh.javascript.info/object-toprimitive" target="_blank" rel="noopener noreferrer">更多</a>关于原始值转换的内容</p></blockquote><br><h3 id="_2-11-原始类型内置方法" tabindex="-1">2.11 原始类型内置方法 <a class="header-anchor" href="#_2-11-原始类型内置方法" aria-hidden="true">#</a></h3><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>

<span class="token comment">// 调用原始类型 String 的内置方法 toUpperCase</span>
str<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// HELLO</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当调用原始类型的内置方法时，JavaScript 进行了以下操作：</p><ol><li>字符串<code>str</code>是一个原始值，在访问其属性时，会创建一个包含字符串字面值的特殊对象，并且具有有效的方法，例如 <code>toUpperCase()</code></li><li>该方法运行并返回一个新的字符串</li><li>特殊对象被销毁，只留下原始值 <code>str</code></li></ol><p>JavaScript 引擎高度优化了这个过程。它甚至可能跳过创建额外的对象。但是它仍然必须遵守规范，并且表现得好像它创建了一样。所以原始类型可以提供方法，但它们依然是轻量级的。</p><blockquote><p>⚠</p><p><code>null/undefined</code>没有任何内置方法</p></blockquote><br><h3 id="_2-12-array" tabindex="-1">2.12 Array <a class="header-anchor" href="#_2-12-array" aria-hidden="true">#</a></h3><blockquote><p>数组可以存储任何类型的元素</p></blockquote><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;aaa&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bbb&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ccc&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ddd&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;abcd&#39;</span>

<span class="token comment">// 数组可以通过下标修改数组的元素</span>
arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;abc&#39;</span> <span class="token comment">// [&#39;abc&#39;, &#39;bbb&#39;, &#39;ccc&#39;, &#39;ddd&#39;]</span>

<span class="token comment">// 但是不能通过下标修改字符串内容，因为字符串是不可变的</span>
str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;a&#39;</span> <span class="token comment">// nothing happens</span>

<span class="token comment">// 类数组 array-like</span>
<span class="token keyword">let</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// 有索引和 length 属性 =&gt; 类数组对象</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&quot;World&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><br><h4 id="_2-12-1-获取数组元素" tabindex="-1">2.12.1 获取数组元素 <a class="header-anchor" href="#_2-12-1-获取数组元素" aria-hidden="true">#</a></h4><p>通常使用的是<code>[]</code>中括号来获取指定下标的数组元素。在我们不知道数组的长，但是需要获取数组的最后一位元素时，可以使用<code>at(index)</code>方法来获取，index 可以是任何<strong>有效的</strong>数组下标。同时支持正值和负值，负值即代表从末尾开始取。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

<span class="token comment">// 取数组的最后一位</span>
arr<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

arr<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><br><h4 id="_2-12-2-数组遍历" tabindex="-1">2.12.2 数组遍历 <a class="header-anchor" href="#_2-12-2-数组遍历" aria-hidden="true">#</a></h4><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

<span class="token comment">// 普通 for 遍历</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// for...of 遍历</span>
<span class="token comment">// 遍历数组元素的值</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// forEach 遍历</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... do something with item</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// for...in 也能遍历数组，但是一般不推荐。</span>
<span class="token comment">// 详见 [#2.7 for 循环] 章节</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><br><h4 id="_2-12-3-数组方法" tabindex="-1">2.12.3 数组方法 <a class="header-anchor" href="#_2-12-3-数组方法" aria-hidden="true">#</a></h4><ul><li><p><strong><code>push(el)</code></strong>，在数组的末端添加元素，可以添加一个或多个</p></li><li><p><strong><code>pop()</code></strong>，从数组的末端取出一个元素</p></li><li><p><strong><code>shift()</code></strong>，取出数组头的第一个元素</p></li><li><p><strong><code>unshift(el)</code></strong>，在数组的首端添加元素，可以添加一个或多个</p></li><li><p><strong><code>splice(start[, deleteCount, elem1, elem2, ..., elemN])</code></strong>，从索引 <code>start</code> 开始修改数组：删除 <code>deleteCount</code> 个元素，并在当前位置插入 <code>elem1, ..., elemN</code>。最后返回已被删除元素的数组。</p></li><li><p><strong><code>slice([start, end])</code></strong>，将所有从索引 <code>start</code> 到 <code>end</code>（不包括 <code>end</code>）的数组项复制到一个新的数组并返回新数组。和字符串的 <code>str.slice</code> 方法有点像，就是把子字符串替换成子数组。不带参数地调用它：<code>arr.slice()</code> 会创建一个 <code>arr</code> 的副本。其通常用于获取副本，以进行不影响原始数组的进一步转换。</p></li><li><p><strong><code>concat(arg1, arg2...)</code></strong>，接受任意数量的参数，数组或值都可以。创建一个以自身开头，参数拼接在后面的新数组。如果参数 <code>argN</code> 是一个数组，那么其中的所有元素都会被复制。否则，将复制参数本身。</p></li><li><p><strong><code>indexOf(item, from)</code></strong>，从索引 <code>from</code> 开始搜索 <code>item</code>，如果找到则返回索引，否则返回 <code>-1</code></p></li><li><p><strong><code>lastIndexOf(item, from)</code></strong>，从索引 <code>from</code> 开始搜索 <code>item</code>，如果找到则返回索引，否则返回 <code>-1</code>。从右向左搜索。</p></li><li><p><strong><code>includes(item, from)</code></strong>，从索引 <code>from</code> 开始搜索 <code>item</code>，如果找到则返回 <code>true</code></p></li><li><p><strong><code>reverse()</code></strong>，于颠倒数组中元素的顺序。</p></li><li><p><strong><code>split(delim[, arrayLength])</code></strong>，通过给定的分隔符 <code>delim</code> 将字符串分割成一个数组。第二个参数指定生成数组的长。</p></li><li><p><strong><code>join(glue)</code></strong>，将数组元素通过指定分隔符连接成字符串</p></li></ul><blockquote><p><code>push/pop</code> 方法运行的比较快，而 <code>shift/unshift</code> 比较慢</p></blockquote><p><code>shift</code> 操作必须做三件事:</p><ol><li>移除索引为 <code>0</code> 的元素。</li><li>把所有的元素向左移动，把索引 <code>1</code> 改成 <code>0</code>，<code>2</code> 改成 <code>1</code> 以此类推，对其重新编号。</li><li>更新 <code>length</code> 属性。</li></ol><p><strong>数组里的元素越多，移动它们就要花越多的时间，也就意味着越多的内存操作。</strong><code>unshift</code> 也是一样：为了在数组的首端添加元素，我们首先需要将现有的元素向右移动，增加它们的索引值。</p><p>而 <code>push/pop</code> 不需要移动任何东西。如果从末端移除一个元素，<code>pop</code> 方法只需要清理索引值并缩短 <code>length</code> 就可以了。</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// splice test</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;I&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;study&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;JavaScript&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从索引 1 开始删除 1 个元素</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;I&quot;, &quot;JavaScript&quot;]</span>

<span class="token comment">// 删除数组的前三项，并使用其他内容代替它们</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;I&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;study&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;JavaScript&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;right&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;now&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;Let&#39;s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dance&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span> <span class="token comment">// 现在 [&quot;Let&#39;s&quot;, &quot;dance&quot;, &quot;right&quot;, &quot;now&quot;]</span>

<span class="token comment">// 将 deleteCount 设置为 0，splice 方法就能够插入元素而不用删除任何元素</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;I&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;study&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;JavaScript&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 从索引 2 开始</span>
<span class="token comment">// 删除 0 个元素</span>
<span class="token comment">// 然后插入 &quot;complex&quot; 和 &quot;language&quot;</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;complex&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;language&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;I&quot;, &quot;study&quot;, &quot;complex&quot;, &quot;language&quot;, &quot;JavaScript&quot;</span>

<span class="token comment">// splice 允许负向索引</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 从索引 -1（尾端前一位）</span>
<span class="token comment">// 删除 0 个元素，</span>
<span class="token comment">// 然后插入 3 和 4</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,4,5</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// slice test</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;t&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// e,s（复制从位置 1 到位置 3 的元素）</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// s,t（复制从位置 -2 到尾端的元素）</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// concat test</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// create an array from: arr and [3,4]</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,4</span>

<span class="token comment">// create an array from: arr and [3,4] and [5,6]</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,4,5,6</span>

<span class="token comment">// create an array from: arr and [3,4], then add values 5 and 6</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,4,5,6</span>

<span class="token comment">// concat 只复制数组中的元素。其他的 array-like 对象仍然会被作为一个整体添加</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;something&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,[object Object]</span>

<span class="token comment">// 如果类似数组的对象具有 Symbol.isConcatSpreadable 属性，那么它就会被 concat 当作一个数组来处理</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;something&quot;</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&quot;else&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,something,else</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// indexOf/lastIndexOf/includes test</span>
<span class="token comment">// 这几个方法内部都是严格的 === 比较</span>

<span class="token comment">// includes 的一个非常小的差别是它能正确处理NaN，而不像 indexOf/lastIndexOf</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">NaN</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1（应该为 0，但是严格相等 === equality 对 NaN 无效）</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// true（这个结果是对的）</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// reverse test</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5,4,3,2,1</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// split test</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token string">&#39;Bilbo, Gandalf, Nazgul, Saruman&#39;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;, &#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bilbo, Gandalf</span>

<span class="token comment">// join test</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;Bilbo&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Gandalf&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Nazgul&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用分号 ; 将数组粘合成字符串</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bilbo;Gandalf;Nazgul</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><h4 id="_2-12-4-高级数组方法" tabindex="-1">2.12.4 高级数组方法 <a class="header-anchor" href="#_2-12-4-高级数组方法" aria-hidden="true">#</a></h4><ul><li><p><strong><code>find/findIndex/findLastIndex(function (item, index, array) {})</code></strong>，找到元素本身或者元素下标。</p></li><li><p><strong><code>filter(function (item, index, array) {})</code></strong>，将所有符合过滤条件的元素组合成新数组并返回。</p></li><li><p><strong><code>map(function (item, index, array) {})</code></strong>，数组元素映射转换方法</p></li><li><p><strong><code>sort(fn)</code></strong>，对数组进行<strong>原位（in-place）排序</strong>（原位是指在此数组内，而非生成一个新数组）。返回排序后的数组，但是返回值通常会被忽略，因为已经修改了 <code>arr</code> 本身，使用数组本身即可。需要注意的是：<code>sort</code>方法排序数组元素默认情况下被按字符串进行排序。通常需要自己实现比较逻辑。返回值需要是数值类型。</p></li><li><p><strong><code>reduce/reduceRight(function (accumulator, item, index, array){}, [initial])</code></strong>，用于根据数组计算单个值。<code>accumulator</code> 表示上一次调用的结果，第一个调用的时候等于<code>initial</code>（如果提供了<code>initial</code>的话）。应用函数时，上一次函数调用的结果将作为第一个参数传递给下一次函数调用。<code>reduceRight</code>功能也是类似的，只是遍历顺序为从右到左。</p></li><li><p><strong><code>some(fn)/every(fn)</code></strong>，对数组的每个元素调用函数 <code>fn</code>。如果<strong>任何/所有</strong>结果为 <code>true</code>，则返回 <code>true</code>，否则返回 <code>false</code>。类似于 <code>||</code> 和 <code>&amp;&amp;</code> 运算符，如果 <code>fn</code> 返回一个真值，<code>arr.some()</code> 立即返回 <code>true</code> 并停止迭代其余数组项；如果 <code>fn</code> 返回一个假值，<code>arr.every()</code> 立即返回 <code>false</code> 并停止对其余数组项的迭代。可以使用 <code>every</code> 来比较数组。</p></li><li><p><strong><code>fill(value[, start, end])</code></strong>，从索引 <code>start</code> 到 <code>end</code>，用重复的 <code>value</code> 填充数组</p></li><li><p><strong><code>copyWithin(target, start, end)</code></strong>，将位置 <code>start</code> 到 <code>end</code> 的所有元素复制到 <strong>自身</strong> 的 <code>target</code> 位置（覆盖现有元素）。</p></li><li><p><strong><code>flat(depth)/flatMap(fn)</code></strong>，从多维数组创建一个新的扁平数组</p></li></ul><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// find/findIndex/findLastIndex test</span>

<span class="token comment">/**
 * @array 数组本身 
 */</span>
<span class="token keyword">let</span> item <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回元素本身</span>
    <span class="token comment">// 未找到返回 undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> index <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回元素下标</span>
    <span class="token comment">// 未找到返回 -1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// filter test</span>
<span class="token keyword">let</span> results <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果 true item 被 push 到 results，迭代继续</span>
  <span class="token comment">// 如果什么都没找到，则返回空数组</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// map test</span>
<span class="token comment">// 将每个元素转换为它的字符串长度</span>
<span class="token keyword">let</span> lengths <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Bilbo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Gandalf&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Nazgul&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>lengths<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5,7,6</span>

<span class="token comment">// sort test</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">15</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 该方法重新排列 arr 的内容</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1, 15, 2 </span>
<span class="token comment">// 为何会出现这种情况？</span>
<span class="token comment">// 因为元素默认情况下被按字符串进行排序</span>

<span class="token comment">// 自定义比较逻辑</span>
<span class="token comment">// 注意使用的比较方法是 a - b 而不是 a &gt; b</span>
<span class="token comment">// 因为 sort 需要返回数值类型</span>
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1, 2, 15 // 结果符合预期 </span>


<span class="token comment">// reduce test</span>
<span class="token comment">// check link: https://zh.javascript.info/array-methods#reducereduceright</span>
<span class="token comment">// check link: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> sum <span class="token operator">+</span> current<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>

<span class="token comment">// some/every test</span>
<span class="token comment">// 比较数组</span>
<span class="token keyword">function</span> <span class="token function">arraysEqual</span><span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span> arr2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr1<span class="token punctuation">.</span>length <span class="token operator">===</span> arr2<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> arr1<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value <span class="token operator">===</span> arr2<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">arraysEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// flat test</span>
<span class="token comment">// check link: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flat</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 2, 3, 4]</span>

<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 2, [3, 4]]</span>

<span class="token comment">// 使用 Infinity，可展开任意深度的嵌套数组</span>
<span class="token keyword">var</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr3<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>

<span class="token comment">// flat() 方法会移除数组中的空项</span>
<span class="token keyword">var</span> arr4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr4<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [1, 2, 4, 5]</span>

<span class="token comment">// flatMap test</span>
<span class="token comment">// flatMap = flat + map</span>
<span class="token comment">// check link: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap</span>
<span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arr1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [[2], [4], [6], [8]]</span>

arr1<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [2, 4, 6, 8]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><p>上述方法除了<code>sort</code>之外都接受一个可选的<code>thisArg</code>参数，但是很少使用。完整的语法应该为：</p><div class="language-js line-numbers-mode"><pre><code>arr<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> thisArg<span class="token punctuation">)</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> thisArg<span class="token punctuation">)</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> thisArg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token comment">// thisArg 是可选的最后一个参数</span>
<span class="token comment">// thisArg 参数的值在 func 中变为 this</span>

<span class="token keyword">let</span> army <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">minAge</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
  <span class="token function">canJoin</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> user<span class="token punctuation">.</span>age <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>minAge <span class="token operator">&amp;&amp;</span> user<span class="token punctuation">.</span>age <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxAge<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 找到 army.canJoin 返回 true 的 user</span>
<span class="token keyword">let</span> soldiers <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>army<span class="token punctuation">.</span>canJoin<span class="token punctuation">,</span> army<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>soldiers<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token function">alert</span><span class="token punctuation">(</span>soldiers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span>
<span class="token function">alert</span><span class="token punctuation">(</span>soldiers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 23</span>

<span class="token comment">// 可以使用 users.filter(user =&gt; army.canJoin(user)) </span>
<span class="token comment">// 替换 users.filter(army.canJoin, army)</span>
<span class="token comment">// 前者的使用频率更高，因为对于大多数人来说，它更容易理解</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><br><h4 id="_2-12-5-数组的-length-属性" tabindex="-1">2.12.5 数组的 length 属性 <a class="header-anchor" href="#_2-12-5-数组的-length-属性" aria-hidden="true">#</a></h4><p>当我们修改数组的时候，<code>length</code> 属性会自动更新。准确来说，它实际上不是数组里元素的个数，而是最大的数字索引值加一。</p><p>例如，一个数组只有一个元素，但是这个元素的索引值很大，那么这个数组的 <code>length</code> 也会很大：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
fruits<span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Apple&quot;</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> fruits<span class="token punctuation">.</span>length <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 124</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>length</code> 属性的还有一个需要注意的点是它是<strong>可写</strong>的。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 如果减少它，数组就会被截断</span>
arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 截断到只剩 2 个元素</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2]</span>

arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 又把 length 加回来</span>
<span class="token function">alert</span><span class="token punctuation">(</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined：被截断的那些数值并没有回来</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>清空数组最简单的方法就是：<code>arr.length = 0;</code></p><br><h4 id="_2-12-6-数组的-tostring" tabindex="-1">2.12.6 数组的 toString <a class="header-anchor" href="#_2-12-6-数组的-tostring" aria-hidden="true">#</a></h4><p>数组有自己的 <code>toString</code> 方法的实现，会返回以逗号隔开的元素列表。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token function">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;1,2,3&#39;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>


<span class="token comment">// 数组没有 Symbol.toPrimitive，也没有 valueOf，它们只能执行 toString 进行转换</span>
<span class="token comment">// [] 就变成了一个空字符串</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;1&quot;</span>
<span class="token comment">// [1] 变成了 &quot;1&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;11&quot;</span>
<span class="token comment">// [1,2] 变成了 &quot;1,2&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;1,21&quot;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><br><h4 id="_2-12-7-数组的本质" tabindex="-1">2.12.7 数组的本质 <a class="header-anchor" href="#_2-12-7-数组的本质" aria-hidden="true">#</a></h4><p>数组实际上是一种<strong>特殊的对象</strong>。使用方括号<code>[]</code>来访问元素实际上是来自对象的语法，实际上与<code>obj[key]</code>相同，数组使用数字来作为键。</p><p>数组扩展了对象，提供了特殊的方法来处理有序的数据集合以及 <code>length</code> 属性。<strong>但从本质上讲，它仍然是一个对象。</strong></p><p>在 JavaScript 中只有 8 种基本的数据类型。数组是一个对象，因此其行为也像一个对象。例如，它是通过引用来复制的：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Banana&quot;</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> fruits<span class="token punctuation">;</span> <span class="token comment">// 通过引用复制 (两个变量引用的是相同的数组)</span>

<span class="token function">alert</span><span class="token punctuation">(</span> arr <span class="token operator">===</span> fruits <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;Pear&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过引用修改数组</span>

<span class="token function">alert</span><span class="token punctuation">(</span> fruits <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Banana, Pear</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><h4 id="_2-12-8-数组对象方法" tabindex="-1">2.12.8 数组对象方法 <a class="header-anchor" href="#_2-12-8-数组对象方法" aria-hidden="true">#</a></h4><ul><li><code>Array.isArray()</code></li></ul><p>数组是基于对象的，不构成单独的语言类型。所以 <code>typeof</code> 不能帮助从数组中区分出普通对象。</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object</span>

<span class="token comment">// 此时可以使用 Array.isArray() 方法来判断</span>
<span class="token function">alert</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token function">alert</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>当检测 <code>Array</code> 实例时，<code>Array.isArray</code> 优于 <code>instanceof</code></p></blockquote><ul><li><code>Array.from()</code></li></ul><p>对一个<strong>类数组</strong>或<strong>可迭代对象</strong>创建一个新的，浅拷贝的数组实例。</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// Array.from(arrayLike[, mapFn[, thisArg]])</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Array [&quot;f&quot;, &quot;o&quot;, &quot;o&quot;]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Array [2, 4, 6]</span>

<span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>range<span class="token punctuation">,</span> <span class="token parameter">num</span> <span class="token operator">=&gt;</span> num <span class="token operator">*</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,4,9,16,25</span>

<span class="token comment">// Array.from 将一个字符串转换为单个字符的数组</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
<span class="token keyword">let</span> chars <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
chars <span class="token comment">// [&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;]</span>
<span class="token comment">// 与 str.split 方法不同，它依赖于字符串的可迭代特性</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><code>Array.of()</code></li></ul><p>创建一个具有可变数量参数的新数组实例，而不考虑参数的数量或类型。 <code>Array.of()</code> 和 <code>Array</code> 构造函数之间的区别在于处理整数参数：<code>Array.of(7)</code> 创建一个具有单个<strong>元素<code>7</code><strong>的数组，而 <code>Array(7)</code> 创建一个</strong>长度为 7</strong> 的空数组</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// Array.of(element0[, element1[, ...[, elementN]]])</span>

Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// [7]</span>
Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3]</span>

<span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// [ , , , , , , ]</span>
<span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [1, 2, 3]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><br><h4 id="_2-12-9-多维数组" tabindex="-1">2.12.9 多维数组 <a class="header-anchor" href="#_2-12-9-多维数组" aria-hidden="true">#</a></h4><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> matrix <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> matrix<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>👇</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer">更多</a>关于<code>Array</code>的内容</p></blockquote><br><h3 id="_2-13-可迭代对象" tabindex="-1">2.13 可迭代对象 <a class="header-anchor" href="#_2-13-可迭代对象" aria-hidden="true">#</a></h3><p><strong>可迭代（Iterable）</strong> 对象是数组的泛化。这个概念是说任何对象都可以被定制为可在 <code>for..of</code> 循环中使用的对象。数组是可迭代的。但不仅仅是数组。很多其他内建对象也都是可迭代的。例如字符串也是可迭代的。</p><p>但是，普通对象就不可以使用<code>for...of</code>迭代，因为它不是一个可迭代对象。</p><br><p><strong>将普通对象变成可迭代</strong></p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token number">5</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ERROR: range is not iterable</span>

<span class="token comment">// 将 range 变成可迭代对象</span>
<span class="token keyword">let</span> range <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token comment">// 实现 [Symbol.iterator] 方法，返回一个可迭代对象</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">,</span>
            <span class="token literal-property property">last</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">,</span>
            <span class="token comment">// next() 在 for..of 的每一轮循环迭代中被调用</span>
            <span class="token comment">// 会返回 {done:.., value :...} 格式的对象</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// current &lt;= last 说明迭代未结束，继续执行</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>last<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token operator">++</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 迭代结束</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// now it works !</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p><code>range</code> 自身没有 <code>next()</code> 方法。是通过调用 <code>range[Symbol.iterator]()</code> 创建了另一个对象，即所谓的<strong>迭代器</strong>对象，并且它的 <code>next</code> 会为迭代生成值。因此，迭代器对象和与其进行迭代的对象是分开的。</p><p>还有一种情况是迭代器对象即对象本身：</p><div class="language-js line-numbers-mode"><pre><code>et range <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>

  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>from<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>current <span class="token operator">&lt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>to<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>current<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> num <span class="token keyword">of</span> range<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, 然后是 2, 3, 4, 5</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>现在 <code>range[Symbol.iterator]()</code> 返回的是 <code>range</code> 对象自身：它包括了必需的 <code>next()</code> 方法，并通过 <code>this.current</code> 记忆了当前的迭代进程。</p><p>但缺点是，现在不可能同时在对象上运行两个 <code>for..of</code> 循环了：它们将共享迭代状态，因为只有一个迭代器，即对象本身。</p><br><p><strong>显式调用迭代器</strong></p><blockquote><p><code>Symbol.iterator</code> 方法会被 <code>for..of</code> 自动调用，也可以手动调用</p></blockquote><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 字符串也是可迭代的，以字符串为例</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;Hello&#39;</span>

<span class="token comment">// 获取迭代器对象</span>
<span class="token keyword">let</span> iterator <span class="token operator">=</span> str<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 迭代未结束，一个个的输出字符</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>很少需要我们这样做，但是比 <code>for..of</code> 给了我们更多的控制权。例如，我们可以拆分迭代过程：迭代一部分，然后停止，做一些其他处理，然后再恢复迭代。</p><br><p><strong>可迭代（iterator）和类数组（array-like）</strong></p><p>这两个官方术语看起来差不多，但其实大不相同：</p><ul><li>可迭代是实现了 <code>Symbol.iterator</code> 方法的对象</li><li>类数组是有索引和 <code>length</code> 属性的对象，所以它们看起来很像数组</li></ul><p>一个可迭代对象也许不是类数组对象。反之亦然，类数组对象可能不可迭代。也有可能两者都是，例如，字符串即是可迭代的（<code>for..of</code> 对它们有效），又是类数组的（它们有数值索引和 <code>length</code> 属性）。</p><blockquote><p><strong>非真正的数组该如何优化</strong>❓</p><p>可迭代对象和类数组对象通常都 <strong>不是数组</strong>，它们没有 <code>push</code> 和 <code>pop</code> 等方法。如果我们有一个这样的对象，并想像数组那样操作它，那就非常不方便。例如，我们想使用数组方法操作 <code>range</code>，应该如何实现呢？</p></blockquote><p>可以使用<code>Array.from()</code>实现，从一个类数组或者可迭代对象创建一个浅拷贝的数组对象。</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// 有索引和 length 属性 =&gt; 类数组对象</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&quot;World&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span>

arr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 现在可以使用数组方法操作了</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><br><h3 id="_2-14-map-set" tabindex="-1">2.14 Map/Set <a class="header-anchor" href="#_2-14-map-set" aria-hidden="true">#</a></h3><h4 id="_2-14-1-map" tabindex="-1">2.14.1 Map <a class="header-anchor" href="#_2-14-1-map" aria-hidden="true">#</a></h4><p><strong>常用方法和属性</strong></p><ul><li><code>new Map()</code>，创建<code>Map</code></li><li><code>map.set(key, value)</code>，根据键存储值。与对象不同，键不会被转换成字符串。键可以是任何类型。甚至是对象也可以作为一个键。支持链式调用。</li><li><code>map.get(key)</code>，根据键来返回值，如果 <code>map</code> 中不存在对应的 <code>key</code>，则返回 <code>undefined</code>。</li><li><code>map.has(key)</code>，如果 <code>key</code> 存在则返回 <code>true</code>，否则返回 <code>false</code>。</li><li><code>map.delete(key)</code>，删除指定键和值。</li><li><code>map.clear()</code>，清空<code>Map</code></li><li><code>map.size</code>，返回当前元素个数</li></ul><div class="language-js line-numbers-mode"><pre><code>map
  <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;str1&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;num1&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&#39;bool1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><br><p><strong>Map 键值的比较</strong></p><p><code>Map</code> 使用 <a href="https://tc39.github.io/ecma262/#sec-samevaluezero" target="_blank" rel="noopener noreferrer">SameValueZero</a> 算法来比较键是否相等。它和严格等于 <code>===</code> 差不多，但区别是 <code>NaN</code> 被看成是等于 <code>NaN</code>。所以 <code>NaN</code> 也可以被用作键。</p><p><br><strong>Map 迭代</strong></p><p><code>Map</code>对象总共有三种迭代方法：</p><ul><li><code>map.keys()</code>，遍历并返回所有的键</li><li><code>map.values()</code> ，遍历并返回所有的值</li><li><code>map.entries()</code>，遍历并返回所有的实体。<code>for..of</code> 在默认情况下使用的就是这个。</li></ul><h4 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h4><br><p><strong>从对象创建 Map</strong><code>Object.entries(obj)</code>返回对象的键/值对数组，该数组格式完全按照 <code>Map</code> 所需的格式。</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 键值对 [key, value] 数组</span>
<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span>  <span class="token string">&#39;str1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span>    <span class="token string">&#39;num1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&#39;bool1&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// str1</span>

<span class="token comment">// 从对象创建 Map</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><br><p><strong>从 Map 创建对象</strong></p><p><code>Object.fromEntries</code> 方法的作用是相反的：给定一个具有 <code>[key, value]</code> 键值对的数组，它会根据给定数组创建一个对象：</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">let</span> prices <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">&#39;banana&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;orange&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;meat&#39;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 现在 prices = { banana: 1, orange: 2, meat: 4 }</span>

<span class="token function">alert</span><span class="token punctuation">(</span>prices<span class="token punctuation">.</span>orange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>

<span class="token comment">// 还可以</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 省掉 .entries()</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><br><h4 id="_2-14-2-set" tabindex="-1">2.14.2 Set <a class="header-anchor" href="#_2-14-2-set" aria-hidden="true">#</a></h4><p>主要方法和属性如下：</p><ul><li><code>new Set(iterable)</code> ，创建一个 <code>Set</code>，如果提供了一个 <code>iterable</code> 对象（通常是数组），将会从数组里面复制值到 <code>Set</code> 中。</li><li><code>set.delete(value)</code>，删除值，如果 <code>value</code> 在这个方法调用的时候存在则返回 <code>true</code> ，否则返回 <code>false</code>。</li><li><code>set.has(value)</code>，如果 <code>value</code> 在<code>set</code>中，返回 <code>true</code>，否则返回 <code>false</code>。</li><li><code>set.clear()</code>，清空<code>set</code>。</li><li><code>set.size</code>，返回元素个数</li></ul><br><h3 id="垃圾回收" tabindex="-1">垃圾回收 <a class="header-anchor" href="#垃圾回收" aria-hidden="true">#</a></h3><h4 id="判断是否是垃圾" tabindex="-1">判断是否是垃圾 <a class="header-anchor" href="#判断是否是垃圾" aria-hidden="true">#</a></h4><p><strong>可达性分析</strong></p><p>某个对象不再可达，垃圾回收器会认为它是垃圾数据并进行回收，然后释放内存。</p><h4 id="垃圾如何回收" tabindex="-1">垃圾如何回收 <a class="header-anchor" href="#垃圾如何回收" aria-hidden="true">#</a></h4><p><strong>标记清除算法</strong></p><ul><li>垃圾收集器找到所有的根对象，并“标记”</li><li>然后遍历并“标记”根对象的所有引用</li><li>然后层层递归遍历并标记根对象所引用的对象的引用，所有被遍历到的对象都会被记住，以免将来再次遍历到同一个对象。</li><li>如此操作，直到所有（从根部）可达的引用都被访问到</li><li>删除没有被标记的对象。</li></ul><h4 id="垃圾收集器的优化" tabindex="-1">垃圾收集器的优化 <a class="header-anchor" href="#垃圾收集器的优化" aria-hidden="true">#</a></h4><ul><li><p><strong>分代收集（Generational collection）</strong>，对象被分成两组：“新的”和“旧的”。大部分对象的生命周期都是：出现，完成工作，到结束。它们很快就会被清理。那些长期存活的对象会变“老”，被检查的频次也会减少。</p></li><li><p><strong>增量收集（Incremental collection）</strong>，如果有许多对象，在标记时，一次遍历并标记整个对象集，可能需要一些时间，并在执行过程中带来明显的延迟。所以引擎会将垃圾收集工作分成几部分来做，然后将这几部分会逐一进行处理。虽然这需要有额外的开销来追踪标记的变化，但是这写开销带来的仅仅是微小的延迟，而不是一个大的延迟。</p><p><strong>闲时收集（Idle-time collection）</strong>，垃圾收集器只会在 CPU 空闲时尝试运行，以减少可能对代码执行的影响</p></li></ul><blockquote><p>垃圾收集方面有点类似 Java，如果之前看过 Java 的这部分内容，很容易理解。</p></blockquote><br><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-hidden="true">#</a></h2><p><a href="https://zh.javascript.info/" target="_blank" rel="noopener noreferrer">https://zh.javascript.info/</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide</a></p><p><a href="https://coffe1891.gitbook.io/frontend-hard-mode-interview" target="_blank" rel="noopener noreferrer">前端内参</a></p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><!----></div><div class="next" data-v-38ede35f><a class="link" href="/posts/fe/Vuejs" data-v-38ede35f><span class="text" data-v-38ede35f>Vue.js</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"backup.md\":\"bd4a10a1\",\"guide_advance.md\":\"64e7d50c\",\"guide_index.md\":\"17e33598\",\"index.md\":\"f3cbfc9a\",\"posts_al_algorithm.md\":\"b72a68e4\",\"posts_al_basic.md\":\"4848470c\",\"posts_al_index.md\":\"ef7cc108\",\"posts_be_java.md\":\"e546f1cf\",\"posts_be_spring.md\":\"dd422fa2\",\"posts_be_springboot.md\":\"ac97a3ee\",\"posts_be_springcloud.md\":\"6227a563\",\"posts_be_index.md\":\"2bc7d26d\",\"posts_be_设计模式.md\":\"cb943ea2\",\"posts_db_mysql.md\":\"aadcc311\",\"posts_db_redis.md\":\"c65740ee\",\"posts_db_index.md\":\"750bac36\",\"posts_fe_javascript.md\":\"d009bed6\",\"posts_fe_react.md\":\"54b37726\",\"posts_fe_typescript.md\":\"e23e19f4\",\"posts_fe_vuejs.md\":\"ae6bdd05\",\"posts_fe_index.md\":\"d056fd16\",\"posts_mw_elasticsearch.md\":\"37efbbc9\",\"posts_mw_kafka.md\":\"6c999ded\",\"posts_mw_rocketmq.md\":\"2c3ff15c\",\"posts_mw_index.md\":\"964000c7\",\"posts_renew_index.md\":\"d9e61216\",\"posts_renew_java_java-基础.md\":\"33285b88\",\"posts_renew_java_java-进阶.md\":\"0e0c3aa0\",\"posts_renew_mysql_mysql.md\":\"01474c72\",\"posts_renew_redis_redis-数据类型.md\":\"d8274e12\",\"posts_renew_redis_redis-配置详解.md\":\"4a27086e\"}")</script>
    <script type="module" async src="/assets/app.d8a09d34.js"></script>
    
  </body>
</html>