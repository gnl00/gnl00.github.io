import{_ as a,o as s,c as e,Q as n}from"./chunks/framework.b41230ea.js";const g=JSON.parse('{"title":"Manjora 安装","description":"Manjora 笔记","frontmatter":{"description":"Manjora 笔记","tag":["Linux"]},"headers":[],"relativePath":"posts/linux/安装配置/Manjora 安装配置.md","filePath":"posts/linux/安装配置/Manjora 安装配置.md","lastUpdated":1700722898000}'),p={name:"posts/linux/安装配置/Manjora 安装配置.md"},l=n(`<h1 id="manjora-安装" tabindex="-1">Manjora 安装 <a class="header-anchor" href="#manjora-安装" aria-label="Permalink to &quot;Manjora 安装&quot;">​</a></h1><p><a href="https://www.jianshu.com/p/f27c70245985" target="_blank" rel="noreferrer">https://www.jianshu.com/p/f27c70245985</a></p><p><a href="https://blog.csdn.net/lj402159806/article/details/80218360" target="_blank" rel="noreferrer">https://blog.csdn.net/lj402159806/article/details/80218360</a></p><p><a href="https://www.jianshu.com/p/333cf36d0914" target="_blank" rel="noreferrer">https://www.jianshu.com/p/333cf36d0914</a></p><h2 id="分区" tabindex="-1">分区 <a class="header-anchor" href="#分区" aria-label="Permalink to &quot;分区&quot;">​</a></h2><p>将 boot/efi 分区挂载到win系统格式为 fat32的100M的efi分区中</p><p>交换分区</p><p>home目录</p><p>/目录</p><h2 id="驱动" tabindex="-1">驱动 <a class="header-anchor" href="#驱动" aria-label="Permalink to &quot;驱动&quot;">​</a></h2><p>开机卡死每次都会遇到</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">sudo vi /ect/default/grub</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">sudo vi /ect/default/grub</span></span></code></pre></div><p>在 quiet 后加上 nouveau.modeset=0，然后</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"> </span></span>
<span class="line"><span style="color:#e1e4e8;"> sudo update-grub</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"> </span></span>
<span class="line"><span style="color:#24292e;"> sudo update-grub</span></span></code></pre></div><p>先换源，后在设置中安装好驱动</p><h2 id="manjaro-设置-国内源" tabindex="-1"><a href="https://www.cnblogs.com/lemos/p/7640680.html" target="_blank" rel="noreferrer">manjaro 设置 国内源</a> <a class="header-anchor" href="#manjaro-设置-国内源" aria-label="Permalink to &quot;[manjaro 设置 国内源](https://www.cnblogs.com/lemos/p/7640680.html)&quot;">​</a></h2><p>注意，如果安装过程中出现无法连接服务，请参看第 4条。</p><p>\\1. 设置官方镜像源（包括 core， extra， community， multilib ）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo pacman-mirrors -i -c China -m rank //更新镜像排名</span></span>
<span class="line"><span style="color:#e1e4e8;">$ sudo pacman -Syy //更新数据源</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo pacman-mirrors -i -c China -m rank //更新镜像排名</span></span>
<span class="line"><span style="color:#24292e;">$ sudo pacman -Syy //更新数据源</span></span></code></pre></div><p>更新 archlinux 签名</p><p>pacman -S archlinux-keyring</p><p>2.设置 archlinuxcn 源</p><p>修改 /etc/pacman.conf　　=&gt; 末尾添加</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[archlinuxcn]</span></span>
<span class="line"><span style="color:#e1e4e8;">SigLevel = Optional TrustedOnly</span></span>
<span class="line"><span style="color:#e1e4e8;">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[archlinuxcn]</span></span>
<span class="line"><span style="color:#24292e;">SigLevel = Optional TrustedOnly</span></span>
<span class="line"><span style="color:#24292e;">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch</span></span></code></pre></div><p>安装 PGP 签名</p><p>1&gt;屏蔽签名</p><p>修改/etc/pacman.conf，将原有的SigLevel=××××××注释掉，添加SigLevel = Never即可。</p><p>2&gt;重新签名（这步先跳过，直接执行第3步）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">pacman -Syu haveged</span></span>
<span class="line"><span style="color:#e1e4e8;">systemctl start haveged</span></span>
<span class="line"><span style="color:#e1e4e8;">systemctl enable haveged</span></span>
<span class="line"><span style="color:#e1e4e8;">rm -rf /etc/pacman.d/gnupg</span></span>
<span class="line"><span style="color:#e1e4e8;">pacman-key --init</span></span>
<span class="line"><span style="color:#e1e4e8;">pacman-key --populate manjaro</span></span>
<span class="line"><span style="color:#e1e4e8;">pacman-key --populate archlinuxcn</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">pacman -Syu haveged</span></span>
<span class="line"><span style="color:#24292e;">systemctl start haveged</span></span>
<span class="line"><span style="color:#24292e;">systemctl enable haveged</span></span>
<span class="line"><span style="color:#24292e;">rm -rf /etc/pacman.d/gnupg</span></span>
<span class="line"><span style="color:#24292e;">pacman-key --init</span></span>
<span class="line"><span style="color:#24292e;">pacman-key --populate manjaro</span></span>
<span class="line"><span style="color:#24292e;">pacman-key --populate archlinuxcn</span></span></code></pre></div><p>3&gt;安装 archlinuxcn源（或相应源）的签名</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo pacman -Syy</span></span>
<span class="line"><span style="color:#e1e4e8;">$ sudo pacman -S archlinuxcn-keyring</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo pacman -Syy</span></span>
<span class="line"><span style="color:#24292e;">$ sudo pacman -S archlinuxcn-keyring</span></span></code></pre></div><p>4&gt;运行 以下命令，更新数据源索引及源里的包（此时可还原之前的 SigLevel ）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo pacman -Syy </span></span>
<span class="line"><span style="color:#e1e4e8;">$ yaourt -Syua</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo pacman -Syy </span></span>
<span class="line"><span style="color:#24292e;">$ yaourt -Syua</span></span></code></pre></div><p>3.设置 aur 源</p><p>修改 /etc/yaourtrc，去掉 # AURURL 的注释，修改为</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">AURURL=&quot;https://aur.tuna.tsinghua.edu.cn&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">AURURL=&quot;https://aur.tuna.tsinghua.edu.cn&quot;</span></span></code></pre></div><p>4.注意执行以上操作时，可能需要关闭系统的网络代理（如果之前设置过网络代理的话）。</p><p>建议安装一个aur helper，例如yay，记得同时安装base-devel，内含一些工具</p><p>sudo pacman -Ss yay base-devel</p><pre><code>1 sudo pacman -Ss yay base-devel
</code></pre><p>然后配置AUR的源，可开启色彩输出</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yay</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--aururl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;https://aur.tuna.tsinghua.edu.cn&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--save</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/#Color/Color/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/pacman.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yay</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--aururl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;https://aur.tuna.tsinghua.edu.cn&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--save</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/#Color/Color/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/pacman.conf</span></span></code></pre></div><p>yay的常见命令和pacman类似</p><p><a href="https://www.jianshu.com/p/966017a6f251" target="_blank" rel="noreferrer">https://www.jianshu.com/p/966017a6f251</a></p><h2 id="manjaro-arch添加archlinuxcn源" tabindex="-1">Manjaro/Arch添加archlinuxcn源 <a class="header-anchor" href="#manjaro-arch添加archlinuxcn源" aria-label="Permalink to &quot;Manjaro/Arch添加archlinuxcn源&quot;">​</a></h2><p>编辑 <code>sudo vim /etc/pacman.conf</code> 并添加以下内容</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#B392F0;">archlinuxcn</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;"># The Chinese Arch Linux communities packages.</span></span>
<span class="line"><span style="color:#E1E4E8;">SigLevel </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Optional TrustAll</span></span>
<span class="line"><span style="color:#E1E4E8;">Server </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> https</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#6F42C1;">archlinuxcn</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;"># The Chinese Arch Linux communities packages.</span></span>
<span class="line"><span style="color:#24292E;">SigLevel </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Optional TrustAll</span></span>
<span class="line"><span style="color:#24292E;">Server </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> https</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">sudo pacman -Syu</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">sudo pacman -Syu</span></span></code></pre></div><p>添加源以及安装输入法 <a href="https://www.jianshu.com/p/d64c4d84abe5" target="_blank" rel="noreferrer">https://www.jianshu.com/p/d64c4d84abe5</a></p><h2 id="安装输入法" tabindex="-1">安装输入法 <a class="header-anchor" href="#安装输入法" aria-label="Permalink to &quot;安装输入法&quot;">​</a></h2><p>搜狗不显示候选窗口 <a href="https://blog.csdn.net/a924068818/article/details/105215300/" target="_blank" rel="noreferrer">https://blog.csdn.net/a924068818/article/details/105215300/</a></p><h2 id="密匙操作" tabindex="-1">密匙操作 <a class="header-anchor" href="#密匙操作" aria-label="Permalink to &quot;密匙操作&quot;">​</a></h2><p>1.首先更新一下密钥，如果没有安装archlinux-keyring,请及时安装</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">sudo pacman-key --refresh-keys</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">sudo pacman-key --refresh-keys</span></span></code></pre></div><p>2.重新加载相应的签名密钥</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">sudo pacman-key --init</span></span>
<span class="line"><span style="color:#e1e4e8;">sudo pacman-key --populate</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">sudo pacman-key --init</span></span>
<span class="line"><span style="color:#24292e;">sudo pacman-key --populate</span></span></code></pre></div><p>3。清除pacman 的缓冲文件</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">sudo pacman -Scc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">sudo pacman -Scc</span></span></code></pre></div><p>4.更新或者安装系统即可</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">sudo pacman -Syu</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">sudo pacman -Syu</span></span></code></pre></div><h2 id="安装常用软件" tabindex="-1">安装常用软件 <a class="header-anchor" href="#安装常用软件" aria-label="Permalink to &quot;安装常用软件&quot;">​</a></h2><p>安装chrome之前需要先配置archlinuxcn源</p><p><a href="https://hacpai.com/article/1561016470769" target="_blank" rel="noreferrer">Manjaro 安装 jdk 8 / docker / docker compose 等常用软件记录</a></p><p><a href="https://www.cnblogs.com/liumanghanfei/p/11153414.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/liumanghanfei/p/11153414.html</a></p><p><a href="https://blog.tshine.me/manjaro-install-and-setup/" target="_blank" rel="noreferrer">https://blog.tshine.me/manjaro-install-and-setup/</a></p><p><a href="https://blog.csdn.net/zbgjhy88/article/details/85110220" target="_blank" rel="noreferrer">https://blog.csdn.net/zbgjhy88/article/details/85110220</a></p><h1 id="manjaro-更新报错-无效或已损坏的软件包-pgp-签名" tabindex="-1">manjaro 更新报错-无效或已损坏的软件包 (PGP 签名) <a class="header-anchor" href="#manjaro-更新报错-无效或已损坏的软件包-pgp-签名" aria-label="Permalink to &quot;manjaro 更新报错-无效或已损坏的软件包 (PGP 签名)&quot;">​</a></h1><p><a href="https://blog.csdn.net/weixin_43968923/article/details/86517381" target="_blank" rel="noreferrer">https://blog.csdn.net/weixin_43968923/article/details/86517381</a></p><h2 id="pacman常用命令" tabindex="-1">Pacman常用命令 <a class="header-anchor" href="#pacman常用命令" aria-label="Permalink to &quot;Pacman常用命令&quot;">​</a></h2><p><a href="https://www.jianshu.com/p/ea651cdc5530" target="_blank" rel="noreferrer">https://www.jianshu.com/p/ea651cdc5530</a></p>`,70),o=[l];function c(t,r,i,d,h,u){return s(),e("div",null,o)}const m=a(p,[["render",c]]);export{g as __pageData,m as default};
