import{_ as s,o as a,c as l,Q as p}from"./chunks/framework.519d889f.js";const f=JSON.parse('{"title":"ffmpeg","description":"ffmpeg 常用命令","frontmatter":{"description":"ffmpeg 常用命令","tag":["ffmpeg"]},"headers":[],"relativePath":"posts/工具/ffmpeg.md","filePath":"posts/工具/ffmpeg.md","lastUpdated":1699262313000}'),o={name:"posts/工具/ffmpeg.md"},n=p(`<h1 id="ffmpeg" tabindex="-1">ffmpeg <a class="header-anchor" href="#ffmpeg" aria-label="Permalink to &quot;ffmpeg&quot;">​</a></h1><h2 id="转换" tabindex="-1">转换 <a class="header-anchor" href="#转换" aria-label="Permalink to &quot;转换&quot;">​</a></h2><p>mp4 to flv 带关键帧</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">input.mp4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-vcodec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-acodec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-flvflags</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add_keyframe_index</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">output.flv</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">input.mp4</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-vcodec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-acodec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-flvflags</span><span style="color:#24292E;"> </span><span style="color:#032F62;">add_keyframe_index</span><span style="color:#24292E;"> </span><span style="color:#032F62;">output.flv</span></span></code></pre></div><h2 id="推-拉流" tabindex="-1">推/拉流 <a class="header-anchor" href="#推-拉流" aria-label="Permalink to &quot;推/拉流&quot;">​</a></h2><p>推流</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># -re 表示实时模式读取输入，按照实际的帧速率进行处理</span></span>
<span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-re</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">output.flv</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rtmp://localhost/live/livestream</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># -re 表示实时模式读取输入，按照实际的帧速率进行处理</span></span>
<span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-re</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">output.flv</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rtmp://localhost/live/livestream</span></span></code></pre></div><p>指定时长推流推流</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 推流 10 分钟</span></span>
<span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-re</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">input.flv</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flv</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">00</span><span style="color:#9ECBFF;">:10:00</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rtmp://localhost/live/livestream</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 推流 10 分钟</span></span>
<span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-re</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">input.flv</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flv</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">00</span><span style="color:#032F62;">:10:00</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rtmp://localhost/live/livestream</span></span></code></pre></div><p>循环推送</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 加上参数 -stream_loop -1 表示循环推送</span></span>
<span class="line"><span style="color:#B392F0;">ffmpeg</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-re</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-stream_loop</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">input.flv</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rtmp://localhost/live/livestream</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 加上参数 -stream_loop -1 表示循环推送</span></span>
<span class="line"><span style="color:#6F42C1;">ffmpeg</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-re</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-stream_loop</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">input.flv</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rtmp://localhost/live/livestream</span></span></code></pre></div><p>拉流</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ffplay</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rtmp://localhost/live/livestream</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ffplay</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rtmp://localhost/live/livestream</span></span></code></pre></div><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://blog.csdn.net/guoyunfei123/article/details/106189162" target="_blank" rel="noreferrer">https://blog.csdn.net/guoyunfei123/article/details/106189162</a></li></ul>`,15),e=[n];function t(c,r,y,E,i,F){return a(),l("div",null,e)}const h=s(o,[["render",t]]);export{f as __pageData,h as default};
